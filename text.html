<header>
  <div class="wrapper">
    <label>Style:</label>
    <select id="highlight-style">
      <option>background</option>
      <option>half</option>
      <option>underline</option>
    </select>
  </div>
  <div class="wrapper">
    <input type="checkbox" id="mode" />
    <label for="mode">Dark Mode</label>
  </div>
</header>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.1/ScrollTrigger.min.js"></script>

<style>
    @import url("https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap");
:root {
  --bg-color-hsl: 59, 3%, 94%;
  --bg-color: hsl(var(--bg-color-hsl));
  --bg-color-translucent: hsla(var(--bg-color-hsl), 0.95);
  --bg-color-highlight: hsl(60, 90%, 50%);
  --color-text: hsl(192, 14%, 20%);
  --color-text-highlight: hsl(192, 14%, 0%);
  --page-width: 80ch;
  --paragraph-font-size: min(max(1.2rem, 4vw), 1.4rem);
  --header-font-size: min(max(2rem, 8vw), 4rem);
  --space: 2rem;
  --padding: 8vmin;
  --duration: 1s;
  --ease: cubic-bezier(0.25, 1, 0.5, 1);
}

.dark-mode {
  --bg-color-hsl: 0, 0%, 7%;
  --bg-color: hsl(var(--bg-color-hsl));
  --bg-color-translucent: hsla(var(--bg-color-hsl), 0.95);
  --bg-color-highlight: hsl(238, 70%, 40%);
  --color-text: hsl(0, 0%, 80%);
  --color-text-highlight: hsl(0, 0%, 100%);
}

* {
  box-sizing: border-box;
}

body {
  font-family: "Lora", sans-serif;
  font-weight: 400;
  color: var(--color-text);
  background-color: var(--bg-color);
  transition: background calc(var(--duration) / 4) var(--ease);
}

header {
  display: flex;
  justify-content: space-between;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  margin: 0 auto;
  padding: calc(var(--space) / 2) var(--padding);
  width: 100%;
  max-width: var(--page-width);
  background-color: var(--bg-color-translucent);
  transition: background calc(var(--duration) / 4) var(--ease);
}
header .wrapper {
  display: flex;
  align-items: center;
}
header .wrapper > * + * {
  margin-left: 4px;
}

select {
  font-family: inherit;
  font-size: 16px;
}

label {
  font-size: 0.8rem;
}

main {
  margin: 12rem auto;
  padding: 0 var(--padding);
  max-width: var(--page-width);
}

h1 {
  font-size: var(--header-font-size);
  font-weight: 700;
  line-height: 1.2;
  margin-bottom: 4rem;
}

p {
  margin: 2rem 0;
  font-size: var(--paragraph-font-size);
  line-height: 1.7;
}

.text-highlight {
  all: unset;
  background-repeat: no-repeat;
  background-size: 0% 100%;
  transition: color calc(var(--duration) / 4) var(--ease), background-color calc(var(--duration) / 4) var(--ease), background-size var(--duration) var(--ease);
}
.text-highlight.active {
  color: var(--color-text-highlight);
  background-size: 100% 100%;
}
[data-highlight=background] .text-highlight {
  background-image: linear-gradient(var(--bg-color-highlight), var(--bg-color-highlight));
}
[data-highlight=half] .text-highlight {
  --line-size: 0.5em;
  background-image: linear-gradient(transparent calc(100% - var(--line-size)), var(--bg-color-highlight) var(--line-size));
}
[data-highlight=underline] .text-highlight {
  --line-size: 0.15em;
  background-image: linear-gradient(transparent calc(100% - var(--line-size)), var(--color-text) var(--line-size));
}
.text-highlight::before, .text-highlight::after {
  position: absolute;
  -webkit-clip-path: inset(100%);
          clip-path: inset(100%);
  clip: rect(1px, 1px, 1px, 1px);
  width: 1px;
  height: 1px;
  overflow: hidden;
  white-space: nowrap;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.text-highlight::before {
  content: " [highlight start] ";
}
.text-highlight::after {
  content: " [highlight end] ";
}
</style>

<main>
  <h1>La Frase Musical: Unidad de Sentido</h1>
  <p>Una frase musical es una unidad melódica y rítmica completa en sí misma, comparable a una oración en el lenguaje hablado. Se construye típicamente sobre un patrón de pregunta y respuesta, conocido como antecedente y consecuente, y suele abarcar una duración de dos, cuatro u ocho compases. La dirección melódica, los puntos de reposo (cadencias) y el diseño rítmico son clave para definir su carácter y límites.</p>

  <p>Identificar el final de una frase es fundamental para la interpretación. La cadencia —el equivalente musical a la puntuación— puede ser conclusiva (cadencia perfecta, como un punto final) o suspensiva (cadencia imperfecta o semicadencia, como una coma). <mark class="text-highlight">Escuchar la respiración natural</mark> de la línea melódica es el primer paso para el análisis fraseológico.</p>

  <p>La articulación y el fraseo en la ejecución dependen de este análisis. Un legato suave puede unir notas dentro de una misma idea, mientras que un ligero descanso o un cambio dinámico (como un decrescendo) pueden marcar el final de una frase. <mark class="text-highlight">La estructura formal básica, la textura y las indicaciones del compositor</mark> son guías esenciales. Una melodía acompañada por acordes que cambian en un compás específico suele indicar el fin de un segmento fraseológico.</p>

  <p>La práctica del análisis y la escucha activa desarrollan esta habilidad. Aislar la línea melódica principal, cantarla para sentir sus puntos de reposo naturales y marcar las cadencias en la partitura son ejercicios fundamentales. <mark class="text-highlight">La comprensión de la frase precede y determina la expresión musical efectiva</mark>.</p>

  <p>La repetición, la secuencia y el contraste son herramientas comunes para expandir o relacionar frases. Una idea musical puede presentarse, repetirse de forma idéntica o variada, y luego contrastarse con material nuevo, creando períodos musicales más largos. Reconocer estos patrones simplifica la memorización y la interpretación estructural. <mark class="text-highlight">La repetición exacta sin variación es menos frecuente que la repetición con modificación</mark>.</p>

  <p>En la música polifónica (como una fuga de Bach), el concepto se multiplica, ya que cada voz contiene su propio discurso fraseológico independiente pero entrelazado. El reto del intérprete es proyectar la claridad de cada línea individual sin perder la cohesión del conjunto. <mark class="text-highlight">El estudio por voces separadas es, por tanto, un método indispensable</mark>.</p>

  <p>En resumen, la frase es la unidad básica de la narración musical. Su correcta identificación y delineación a través de la dinámica, la articulación y el ritmo respiratorio es lo que transforma una sucesión de notas en un discurso comunicativo y expresivo. <mark class="text-highlight">Dominar el fraseo es dominar el arte de decir algo con la música</mark>.</p>
</main>

<script>
    const highlight = document.getElementById("highlight-style");
const mode = document.getElementById("mode");

gsap.registerPlugin(ScrollTrigger);

gsap.utils.toArray(".text-highlight").forEach((highlight) => {
  ScrollTrigger.create({
    trigger: highlight,
    start: "-100px center",
    onEnter: () => highlight.classList.add("active")
  });
});

const setHighlightStyle = (value) =>
  document.body.setAttribute("data-highlight", value);

mode.addEventListener("click", (e) =>
  document.body.classList.toggle("dark-mode")
);

highlight.addEventListener("change", (e) => setHighlightStyle(e.target.value));

setHighlightStyle(highlight.value);

</script>
