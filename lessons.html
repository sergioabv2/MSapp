

<head>
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1.0, user-scalable=no">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-materialize/0.2.1/angular-materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css"></link>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"></link>
 <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
</script>
  
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/tone@14.7.58"></script>
 <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/focus-visible@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/html-midi-player@1.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.2"></script>

    <!--
<script src="https://cdn.jsdelivr.net/npm/inertia-plugin@0.6.0/dist/runtime.iife.js"></script>

<script src="https://assets.codepen.io/16327/InertiaPlugin.min.js"></script>
    -->
</head>




<style>
  @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap");
*,
::after,
::before {
  --tw-ring-inset: ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
}

body {

  font-family: "Poppins", sans-serif;
background-color: #e5ecef;
}

   
body::-webkit-scrollbar {
  width: 8px;
}


body::-webkit-scrollbar-track {
  border-radius: 0;
}


body::-webkit-scrollbar-thumb {
  background-color: rgba(131, 135, 193, 0.4);
  border-radius: 40px;
}
  
  .collection {
  border: none;
}

.levelp a {
  color: #F44336 !important;
}

.levelp i {
  color: #F44336 !important;
}

.level1 a {
  color: #9024dc !important;
}

.level1 i {
  color: #9024dc;
}

.level2 a {
  color: #1894cc !important;
}

.level2 i {
  color: #1894cc;
}


.level3 a {
  color: #489454 !important;
}

.level3 i {
  color: #489454;
}

.level4 a {
  color: #fa9223 !important;
}

.level4 i {
  color: #fa9223;
}

.level5 a {
  color: #485cb4 !important;
}

.level5 i {
  color: #485cb4;
}

.level6 a {
  color: #08949c !important;
}

.level6 i {
  color: #08949c;
}

.level7 a {
  color: #e09c74 !important;
}

.level7 i {
  color: #e09c74;
}



.indicator {
  background-color: #9e9e9e !important;
}

.modal-content {
  padding: 24px !important;
  overflow: visible !important;
  height: 550px !important;
}

.linehorizontal{
  border-bottom: 1px solid lightgray; 
  margin-bottom: 15px;
  margin-left: -30px;
  width: 125%;
}


.collapsible-header{
  margin-left: -35px;
   margin-right: -25px;
}

.collapsible {
  transition: max-height 10s ease-out;
}


.text-inside{
  text-transform: none;
  cursor: pointer;
}

.inside{
  margin-top: 15px;
  transform: translate(-3px, 5px);
  cursor: pointer;
}

 


.modal-container {
    position: fixed;
    display: table;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    transform: scale(0);
    z-index: 1;
}

.modal-container.four {
    z-index: 0;
    transform: scale(1);
}

.modal-container .modal-background {
    display: table-cell;
    background: rgba(0, 0, 0, 0.8);
    text-align: center;
    vertical-align: middle;
    padding: 0; /* Elimina padding externo */
}
.modal-container .modal-background .modal-doc {
    display: inline-block;
    width: 100%; /* Ocupa el 100% del ancho */
    height: 100vh; /* Ocupa el 100% del alto de la pantalla */
    margin: 0; /* Sin márgenes */
    padding: 0; /* Sin relleno interno */
    position: relative;
    border-radius: 0; /* Elimina bordes redondeados para esquinas perfectas */
    overflow: hidden;
    box-sizing: border-box; /* Asegura que no haya espacios adicionales */
}

/* Iframe - Ocupa el 100% del contenedor .modal-doc */
#drive {
    width: 100%;
    height: 86vh;
    border: none; /* Elimina borde por defecto */
    border-radius: 12px;
    display: block; /* Elimina espacios fantasma */
}

/* Botones de control (fullscreen/close) */
#fullscreen-btn, .close-modal {
    position: absolute;
    z-index: 10;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 8px;
    border-radius: 50%;
    cursor: pointer;
}

.close-modal {
    top: 10px;
    right: 10px;
}

#fullscreen-btn {
    top: 10px;
    right: 50px;
}



  @keyframes blowUpContent {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    99.9% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes blowUpContentTwo {
    0% {
      transform: scale(2);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  @keyframes blowUpModal {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes blowUpModalTwo {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(0);
      opacity: 0;
    }
  }
  


.video-modal,
.video-modal .overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 3000;
}
.video-modal {
  overflow: hidden;
  position: fixed;
  opacity: 0.0;

  -webkit-transform: translate(500%,0%);
  transform: translate(500%,0%);

  -webkit-transition: -webkit-transform 0s linear 0s;
  transition: transform 0s linear 0s;


  /* using flexbox for vertical centering */

  /* Flexbox display */
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;

  /* Vertical alignment */
  -webkit-box-align: center;
  -moz-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;

  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;
}
.video-modal .overlay {
  z-index: 0;
  background: rgba(0, 0, 0, 0.6); /* Fondo semi-transparente */
  backdrop-filter: blur(8px); /* Efecto de difuminado */
  -webkit-backdrop-filter: blur(8px); /* Compatibilidad con navegadores WebKit */
  opacity: 0.0;
  -webkit-transition: opacity 0.2s ease-out 0.05s;
  transition: opacity 0.2s ease-out 0.05s;
}


.video-modal-content {
  position: relative;
  top: auto;
  right: auto;
  bottom: auto;
  left: auto;
  z-index: 1;
  margin: 0 auto;
  width: calc(100% - 12px);
  height:  calc(100% - 12px);
  padding-top: calc((100% - 12em) * 0.5625); /* 16:9 calc */
  
  
  /*padding: 0;
  margin: 0;*/
  font-family: "Roboto", sans-serif;
  color: white;
  overflow: hidden;
}



iframe#youtube {
  position: absolute;
  top: 20px; /* Aumentado el margen superior */
  right: 0;
  bottom: 10px; /* Mantén margen inferior */
  left: 0;
  width: 100%;
  height: calc(88vh - 20px); /* Altura ajustada restando márgenes */
  padding-top: 33px;
  box-shadow: 0px 2px 16px rgba(0, 0, 0, 0.5);
}


@media (max-width: 450px) {
  iframe#youtube{
    top: 15px; 
    bottom: 15px; 
    height: calc(75vh - 20px); 
    padding-top: 120px;
  }
}

   /*
@media (min-width: 750px) {
  iframe#youtube{
    top: 12px; 
    bottom: 10px; 
    height: calc(90vh - 22px); 
    padding-top: 50px;
  }
}
   */


.videoslider {
  display: block;
  width: 100%;
  height: auto;
  margin: 0; /* Asegúrate de que no haya márgenes que lo desplacen */
}


#slideshow{
   position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1;
  box-shadow: 0px 2px 16px rgba(0,0,0,0.5);
}


 
/* show the modal: 
   add class to the body to reveal */
.show-video-modal .video-modal {
  opacity: 1.0;

  transform: translate(0%,0%);
  -webkit-transform: translate(0%,0%);
}
.show-video-modal .video-modal .overlay {
  opacity: 1.0;
}
.show-video-modal .video-modal-content {
  transform: translate(0%,0%);
  -webkit-transform: translate(0%,0%);
}


  

.lvlmenu {
    display: flex;
    white-space: nowrap;
}

.overview-text-subheader {
  font-size: 13px;
  line-height: 2em;
}

.job-overview-card{
  display: none;
}


 .desktop-menu{
    display: none;
  }
/* Cambia el diseño a vertical en pantallas amplias (médium y superiores) */
@media (min-width: 990px) {
   .mainContain{
      display: flex;
      flex-direction: row;
    }

    .lsnContain{
        margin-left: 10px;
    }
  
  .mobile-menu{
    display: none;
  }
   .desktop-menu{
    display: block;
  }

  .job-explain{
    margin-top: 20px;
  }
  
  .job-explain img{
    border-radius: 7px 7px 0 0;
  }
  
 
  
  ul.lvlmenu {
    background: transparent;
   padding-top: 20px;
  display: grid;
  grid-template-columns: repeat(1, 1fr);

  grid-row-gap: 10px;
  -webkit-animation: slideY 0.6s both;
          animation: slideY 0.6s both;
    height: 710px;
    
  }
  
    ul.lvlmenu li.tab {
    display: flex;
  flex-direction: column;
  width: 260px;
  height: auto;
  flex-shrink: 0;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  background-color: #fff;
  transform: scale(0.9);
    /*  width: 100%; */
       text-transform: none;
  }
  



.job-overview-card{
  display: block;
}
  
  .titlelvlrow{
    display: none;
  }

.job-card {
  background-color: white;
  border-radius: 15px;
  cursor: pointer;
  transition: 0.2s;
}


.job-card-title {
  font-weight: 600;
  margin-top: 10px;
  font-size: 14px;
  color: black;
}
.job-card-subtitle {
  font-size: 10px !important;
  color: black;
}
.job-card-header {
  display: flex;
  align-items: flex-start;
}

.overview-card:hover {
  transition: none;
  transform: scale(1.02);
} 

.overview-card:hover .level-button {
  transform: translate(20px, 0);
}

.job-overview-buttons {
  display: flex;
  align-items: center;

}
.job-overview-buttons .search-buttons {

  font-size: 11px;
  padding: 0 8px;
  height: 10px;
  margin-top: -35px;
  font-weight: 500;
} 
.job-overview-buttons .search-buttons.time-button {
  margin-left: -10px;
}
.job-overview-buttons .search-buttons.level-button {
  position: absolute;
  right: 45px;

  transition: transform 0.5s ease;
}

 .overview-wrapper {
  display: flex;
  align-items: center;
}

.job-overview-buttons .locklvl {
  background: none;
  box-shadow: none;
   display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;

  color: black !important;
  border: 1px solid #d8d8d8;
  margin-left: auto;
  margin-top: auto;
}

.overview-detail .job-card-title,
.overview-detail .job-card-subtitle {
  margin-top: 4px;
}
.overview-detail .job-card-subtitle {
  font-size: 12px;
  margin-top: -25px;

  font-weight: 500;
}

}


 








.job-explain {
  background-color: white;
  border-radius: 0 0 8px 8px;
}

.job-bg {
  -o-object-fit: cover;
     object-fit: cover;
  width: 100%;
  height: 100px;
  transition: 0.3s;
  position: relative;
}

.job-logos {
  margin-top: -30px;
  position: relative;
  margin-bottom: -36px;
  padding: 0 20px;
}


.job-title-wrapper {
  display: flex;
  align-items: center;
}
.job-title-wrapper .job-card-title2 {
  font-size: 20px;
  margin-top: 0;
  font-weight: 600;
}

.job-action {
  display: flex;
  align-items: center;
  margin-left: auto;
}
.job-action svg {
  width: 32px;
  border: 1px solid #d8d8d8;
  color: #83838e;
  border-radius: 8px;
  padding: 6px;
}
.job-action svg + svg {
  margin-left: 12px;
}

.job-explain-content {
  padding: 50px 10px 30px;
}

.job-subtitle-wrapper {
  display: flex;
  align-items: center;
  margin-top: 20px;
}
.job-subtitle-wrapper .posted {
  margin-left: auto;
}
.job-subtitle-wrapper .company-name {
  /*color: #0162ff;*/
  color: black;
  font-weight: 600;
  font-size: 14px;
}
.job-subtitle-wrapper .comp-location,
.job-subtitle-wrapper .posted {
  color: #83838e;
  font-size: 12px;
  font-weight: 500;
}
.job-subtitle-wrapper .comp-location {
  position: relative;
  margin-left: 10px;
}
.job-subtitle-wrapper .comp-location:before {
  content: "";
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background-color: #9b9ba5;
  top: 49%;
  left: -8px;
  position: absolute;
}
.job-subtitle-wrapper .app-number {
  color: black;
  position: relative;
  margin-left: 12px;
}


.explain-bar {
  margin-top: 20px;
  border: 1px solid #d8d8d8;
  border-radius: 8px;
  display: flex;
  height: 66px;
  padding: 0 16px;
  align-items: center;
  justify-content: space-between;
}
.explain-title {
  color: #83838e;
  font-size: 12px;
  line-height: 40px;
  white-space: nowrap;
}
.explain-subtitle {
  display: flex;
  align-items: center;
  font-size: 13px;
  font-weight: 500;
  margin-top: -2px;
  white-space: nowrap;
}
.explain-contents {
  height: 66px;
}
.explain-contents + .explain-contents {
  border-left: 1px solid #d8d8d8;
  padding-left: 16px;
}



@media screen and (max-width: 990px) {
  .explain-contents, .explain-bar {
    height: auto;
  }

  .explain-bar {
    flex-wrap: wrap;
    padding-bottom: 14px;
  }

  .explain-contents {
    width: 50%;
  }

  .explain-contents + .explain-contents {
    padding: 0;
    border: 0;
  }

  .explain-contents:nth-child(2) ~ .explain-contents {
    margin-top: 16px;
    border-top: 1px solid #d8d8d8;
  }

  .job-subtitle-wrapper {
    flex-direction: column;
    align-items: flex-start;
  }
  
 

  .job-subtitle-wrapper .posted {
    margin-left: 0;
    margin-top: 6px;
  }
}






   

  
  .unlockBtn{
  font-family: "Poppins", sans-serif;
  text-decoration: none;
  z-index: 30;
  box-sizing: border-box;
  position: absolute;
    top: 50px;
    right: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: auto;
  padding-left: 1rem;
  padding-right: 1rem;
  padding-top: 0.55rem;
  padding-bottom: 0.55rem;
  overflow: hidden;
  font-weight: 700;
  color: white;
  border-radius: 0.375rem;
  --tw-ring-offset-width: 2px;
  cursor: pointer;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  --tw-ring-offset-color: #c7d2fe;
  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0
    var(--tw-ring-offset-width) var(--tw-ring-offset-color);
  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0
    calc(1px + 2px) rgb(59 130 246 / 0.5);
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow),
    var(--tw-shadow, 0 0 #0000);
  --tw-ring-offset-color: #c7d2fe;
}

.unlockBtn:hover{
  --tw-ring-offset-color: #6366f1;
}

.unlockBtn:focus{
  outline: transparent solid 2px;
  outline-offset: 2px;
}


.btnBorderRight{
  position: absolute;
  bottom: 0;
  right: 0;
  width: 2rem;
  height: 5rem;
  margin-bottom: -2rem;
  margin-right: -1.25rem;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  background-color: rgb(255 255 255);
  opacity: 0.1;
  transform: translate(0.25rem, 0) rotate(45deg);
}


.btnBorderLeft{
  position: absolute;
  top: 0;
  left: 0;
  width: 5rem;
  height: 2rem;
  margin-top: -0.25rem;
  margin-left: -3rem;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
  background-color: rgb(255 255 255);
  opacity: 0.1;
  transform: translate(-0.25rem, 0) rotate(-45deg);
}


.btniContainer{
  position: relative;
  z-index: 20;
  display: flex;
  align-items: center;
  font-size: 0.875rem;
  line-height: 1.25rem;
}




.btnIcon {
  background: none;
  box-shadow: none;
   display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;

  color: white;
  /*border: 1px solid #d8d8d8;*/
  margin-left: 7px;
  margin-top: auto;
}

   ::-webkit-scrollbar:horizontal {
  height: 2px; /* Cambia el tamaño del scrollbar horizontal */
}
::-webkit-scrollbar-thumb:horizontal {
  background-color: #ccc; /* Color del thumb */
  border-radius: 2px; /* Redondeo */
}
::-webkit-scrollbar {
  width: 2px; /* Tamaño normal de scrollbar vertical */
}










#masterWrap {
  width: 100%;
  height: 100%;
  position: absolute;
  overflow: hidden;
}

#panelWrap {
  width: 100%;
  height: 100%;
}

section {
  width: 100%;
  display: flex;
  align-content: center;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  position: relative;
    text-align: center;
}
.dots {
  position: absolute;
  z-index: 100;
  bottom: 22px; /* Posiciona los dots en el fondo */
  left: 50%;
  transform: translateX(-50%); /* Centra los dots horizontalmente */
  display: flex; /* Alinea los dots horizontalmente */
  justify-content: center; /* Centra los dots en el contenedor */
}

.dot {
  width: 12px;
  height: 12px;
  border-radius: 100%;
  background-color: #fff;
  margin: 0 8px; /* Espaciado horizontal entre los dots */
  cursor: pointer;
}


.x-tempo {
  top: 15px;
  left: 15px;
  position: absolute;
  z-index: 100;
  font-size: 18px;
  width: 10%;
  text-transform: capitalize;
}


#downArrow {
  bottom: 18px;
}

#upArrow {
  top: 12px;
}

.arrow {
  position: absolute;
  z-index: 100;
  right: 12px;
  cursor: pointer;
  opacity: 0.75;
  width: 40px;
  height: 40px;
  stroke-width: 8px;
  stroke: white;
  fill: transparent;
}


.hideMe {
  opacity: 0;
}
.iconWrap {
    display: flex;
  justify-content: space-between; /* Opcional: Puedes usar 'center', 'flex-start', etc. */
  gap: 10px;
  width: 300px;
  margin-top: 30px;
}

@media (min-width: 700px) {
  .iconWrap {
    width: 600px;
  }
}


}



 

/* Barra de progreso */
.progress {
  position: relative;
  width: 100%;
  height: 10px;
  background-color: #cdcdcd;
}

.progress__bar {
  display: block;
  background-color: red;
  width: 0%; /* Cambiar dinámicamente según el progreso */
  height: 100%; /* Ocupa toda la altura de la barra */
  z-index: 1;
}

.progress .keyframe {
  position: absolute;
  top: -6px; /* Ajuste para que el círculo esté centrado sobre la barra */
  display: block;
  width: 1rem;
  height: 1rem;
  margin-left: -0.5rem;
  border-radius: 50%;
  background-color: green;
  z-index: 10;
}




   

.start_btn,
.info_box,
.quiz_box,
.result_box{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 
                0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.info_box.activeInfo,
.quiz_box.activeQuiz,
.result_box.activeResult{
    opacity: 1;
    z-index: 5;
    pointer-events: auto;
    transform: translate(-50%, -50%) scale(1);
}

.start_btn button{
    font-size: 25px;
    font-weight: 500;
    color: #007bff;
    padding: 15px 30px;
    outline: none;
    border: none;
    border-radius: 5px;
    background: #fff;
    cursor: pointer;
}

.info_box{
  width: 93%;
    max-width: 540px;
    background: #fff;
    border-radius: 5px;
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s ease;
}

.info_box .info-title{
    height: 60px;
    width: 100%;
    border-bottom: 1px solid lightgrey;
    display: flex;
    align-items: center;
    padding: 0 30px;
    border-radius: 5px 5px 0 0;
    font-size: 20px;
    font-weight: 600;
}

.info_box .info-list{
    padding: 15px 30px;
}

.info_box .info-list .info{
    margin: 5px 0;
    font-size: 14px;
   font-weight: 400;
  text-align: start;
}

.info_box .info-list .info span{
    font-weight: 600;
    color: #007bff;
}
.info_box .buttons{
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 30px;
    border-top: 1px solid lightgrey;
}

.info_box .buttons button{
    margin: 0 5px;
    height: 40px;
    width: 100px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    outline: none;
    border-radius: 5px;
    border: 1px solid #007bff;
    transition: all 0.3s ease;
}

.quiz_box{
  width: 93%;
    max-width: 550px;
    background: #fff;
    border-radius: 5px;
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s ease;
}

.quiz_box header{
    position: relative;
    z-index: 2;
    height: 70px;
    padding: 0 30px;
    background: #fff;
    border-radius: 5px 5px 0 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0px 3px 5px 1px rgba(0,0,0,0.1);
}

.quiz_box header .title{
    font-size: 20px;
    font-weight: 600;
}

.quiz_box header .timer{
    color: #004085;
    background: #cce5ff;
    border: 1px solid #b8daff;
    height: 45px;
    padding: 0 8px;
    border-radius: 5px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 145px;
}

.quiz_box header .timer .time_left_txt{
    font-weight: 400;
    font-size: 17px;
    user-select: none;
}

.quiz_box header .timer .timer_sec{
    font-size: 18px;
    font-weight: 500;
    height: 30px;
    width: 45px;
    color: #fff;
    border-radius: 5px;
    line-height: 30px;
    text-align: center;
    background: #343a40;
    border: 1px solid #343a40;
    user-select: none;
}

.quiz_box header .time_line{
    position: absolute;
    bottom: 0px;
    left: 0px;
    height: 3px;
    background: #007bff;
}


section .que_text{
    font-size: 25px;
    font-weight: 600;
}

section .option_list{
    padding: 20px 0px;
    display: block;   
}

section .option_list .option{

    width: 50vh !important;
    background: aliceblue;
    border: 1px solid #84c5fe;
    border-radius: 5px;
    padding: 8px 15px;
    font-size: 17px;
    margin-bottom: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

section .option_list .option:last-child{
    margin-bottom: 0px;
}

section .option_list .option:hover{
    color: #004085;
    background: #cce5ff;
    border: 1px solid #b8daff;
}

section .option_list .option.correct{
    color: #155724;
    background: #d4edda;
    border: 1px solid #c3e6cb;
}

section .option_list .option.incorrect{
    color: #721c24;
    background: #f8d7da;
    border: 1px solid #f5c6cb;
}

section .option_list .option.disabled{
    pointer-events: none;
}

section .option_list .option .icon{
    height: 26px;
    width: 26px;
    border: 2px solid transparent;
    border-radius: 50%;
    text-align: center;
    font-size: 13px;
    pointer-events: none;
    transition: all 0.3s ease;
    line-height: 24px;
}
.option_list .option .icon.tick{
    color: #23903c;
    border-color: #23903c;
    background: #d4edda;
}

.option_list .option .icon.cross{
    color: #a42834;
    background: #f8d7da;
    border-color: #a42834;
}

footer{
    height: 60px;
    padding: 0 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-top: 1px solid lightgrey;
}

footer .total_que span{
    display: flex;
    user-select: none;
}

footer .total_que span p{
    font-weight: 500;
    padding: 0 5px;
}

footer .total_que span p:first-child{
    padding-left: 0px;
}

footer button{
    height: 40px;
    padding: 0 13px;
    font-size: 18px;
    font-weight: 400;
    cursor: pointer;
    border: none;
    outline: none;
    color: #fff;
    border-radius: 5px;
    background: #007bff;
    border: 1px solid #007bff;
    line-height: 10px;
    opacity: 0;
    pointer-events: none;
    transform: scale(0.95);
    transition: all 0.3s ease;
}

.next_btn{
  float: right !important;
  margin-top: -40px;
}

footer button:hover{
    background: #0263ca;
}

footer button.show{
    opacity: 1;
    pointer-events: auto;
    transform: scale(1);
}

.result_box{
    background: #fff;
    border-radius: 5px;
    display: flex;
    padding: 25px 30px;
  width: 93%;
    max-width: 450px;
    align-items: center;
    flex-direction: column;
    justify-content: center;
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s ease;
}

.result_box .icon{
    font-size: 100px;
    color: #007bff;
    margin-bottom: 10px;
}

.result_box .complete_text{
    font-size: 20px;
    font-weight: 500;
}

.result_box .score_text span{

    font-size: 18px;
    font-weight: 400;
}

.result_box .score_text span p{

    font-weight: 600;
}

.result_box .buttons{
    display: flex;
    margin: 20px 0;
}

.result_box .buttons button{
    margin: 0 10px;
    height: 45px;
    padding: 0 20px;
    font-size: 18px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    outline: none;
    border-radius: 5px;
    border: 1px solid #007bff;
    transition: all 0.3s ease;
}



.buttons button.restart{
    color: #fff;
    background: #007bff;
}

.buttons button.restart:hover{
    background: #0263ca;
}

.buttons button.quit{
    color: #007bff;
    background: #fff;
}

.buttons button.quit:hover{
    color: #fff;
    background: #007bff;
}

  
  .button-container {
    display: flex;
    gap: 20px;
    margin-top: -50px; 
}

.control-btn {
    background: none;
    border: none;
    font-size: 33px;
    color: #fff;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.control-btn:hover {
    transform: scale(1.1);
}


   
.example-two{
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
  max-width: 360px;
  margin: 15px auto;
  color: #64cce3;
  line-height: 1.5;
  box-sizing: border-box !important;
  font-weight: 500;
   text-shadow: 0 0 10px white;
}

.scroll {
  white-space: nowrap;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: -ms-autohiding-scrollbar;
}

.example-two-header nav {
  width: 75%;
  height: 40px;
  background-color: #2b2c3b;
   border-radius: 7px;
}

.example-two-header {
  border-radius: 3px;
}

.nav-item {
  
  cursor: pointer;
  padding: 0 16px;
  margin-top: -18px !important;
  font-size: 14px;
 
}


.nav-item:not(:last-child) {
  border-right: 1px solid rgba(114, 124, 135, 0.2);

}



.nav-item,
.vertical-align-middle {
  display: inline-block;
  vertical-align: middle;
}


.scroll::-webkit-scrollbar {
  display: none;
}



     


   
.quiz *{
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

.quiz {
 font-family: system-ui, sans-serif;
  margin: 0;
  padding: 10px;
  
}

.quiz-intro {
    max-width: 350px;
  }

.imgQuizContainer{
  text-align: center;
  margin-bottom: 50px;
}

.imageQuiz{
  height: 100px;
  width: 300px;
} 

#quiz {
  width: 100%;
  margin: 10% auto 0 auto;
  -webkit-box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  border-radius: 10px;
  -webkit-transition: 0.5s all;
  -o-transition: 0.5s all;
  transition: 0.5s all;
  background-color: #E6EAEF;
}



#quiz-content {
 max-width: 350px;
  margin: 10% auto 0 auto;

  border-radius: 10px;
  -webkit-transition: 0.5s all;
  -o-transition: 0.5s all;
  transition: 0.5s all;
  background-color: #1c232b;
  color: #E6EAEF;
}

#results {
  max-width: 380px;
  margin: 10% auto 0 auto;
  -webkit-box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  border-radius: 10px;
  -webkit-transition: 0.5s all;
  -o-transition: 0.5s all;
  transition: 0.5s all;
  background-color: #1c232b;
  color: #E6EAEF ;
}

.quiz-started {
  padding: 10px;
}

#quiz-bg {

  padding: 25px;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  text-align: center;
}

#quiz-bg i {
  color: rgba(255, 255, 255, 0.9);
  font-size: 64px;
  font-weight: 700;
}



#quiz-body {
  padding: 15px;
}

#quiz-body h1 {
  text-align: center;
  font-size: 22px;
  font-weight: 700;
  margin: 0;
}

#progress-container {
  background-color: #eee;
  height: 6px;
  border-radius: 50px;
  text-align: left;
  position: relative;
  margin-bottom: 12px;
}

#progress {
  width: 0;
  background: -webkit-gradient(
    linear,
    left top,
    right top,
    from(#0288d1),
    to(#4fc3f7)
  );
  background: -webkit-linear-gradient(left, #0288d1, #4fc3f7);
  background: -o-linear-gradient(left, #0288d1, #4fc3f7);
  background: linear-gradient(to right, #0288d1, #4fc3f7);
  border-radius: 50px;
  display: inline-block;
  height: inherit;
  position: absolute;
  -webkit-transition: 0.75s width;
  -o-transition: 0.75s width;
  transition: 0.75s width;
}

#stats {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
}

#stats p {
  margin: 0;
  font-size: 14px;
}

#stats span {
  color: #ADD8E6;
  font-weight: 700;
}

#answers h2 {
  margin: 50px 0;
  color: #E6EAEF;
  font-size: 20px;
}

.answer {
  padding: 5px;
   width: 49vh;
}

.answer-number {
  display: inline-block;
  margin-right: 10px;
  border-top-left-radius: 5px;
  font-weight: 700;
  border-bottom-left-radius: 5px;
}

label {
  display: block;
  width: 100%;
  padding: 7px;
  height: 38px !important;
  background-color: #28323E;
  border-radius: 5px;
  border: 1px solid #384656;
  color: #E6EAEF !important;

  
}

input[type="radio"]:hover:not(:disabled) + label {
  background-color: #384656;
}

input[type="radio"] {
 
  opacity: 0;
  position: absolute;
  left: 0;
  top: 0;
}


/* Crear el círculo manualmente */
input[type="radio"] + label::before {
content: none !important;
}


/* Punto interior al seleccionar */
input[type="radio"]:checked + label.red-bg::after {
  content: '\2716';
  width: 30px;
  height: 30px;
  color: darkred;
  background-color: transparent;
  border: transparent;
  border-radius: 50%;
  position: absolute;

  top: 7px;
  text-align: center; /* Alinea horizontalmente el contenido */
  line-height: 18px;
}

input[type="radio"]:checked + label.green-bg::after {
  content: none !important;
}






#notification {
  position: absolute;
  margin-top: -380px;
  height: 200px;
  width: 100%;
  border-radius: 10px;
  padding: 0 0 20px 0;
  margin-left: -10px;
  background-color: transparent;
  text-align: center;
}

#notification p {
  margin-bottom: 220px;
  font-size: 20px;
  font-weight: bold;
  color: #666;
  text-shadow: 1px 1px 2px black;
}

#results {
  padding: 20px;
}

#results h2 {
  font-size: 20px;
}

#results h3 {
  font-size: 16px;
  margin-top: 30px;
  margin-bottom: 15px;
}

#percentage {
  font-size: 45px;
  font-weight: 700;
  display: block;
  margin-top: 15px;
  margin-bottom: 35px;
}

.share-link {
  color: #fff;
  text-decoration: none;
  padding: 7px 20px;
  border-radius: 3px;
  display: inline-block;
  font-size: 14px;
  -webkit-transition: 0.3s background-color;
  -o-transition: 0.3s background-color;
  transition: 0.3s background-color;
}


.shortcuts-info {
  position: absolute;
  display: none;
  right: 0;
  bottom: 35px;
  max-width: 40%;
  margin: 15px;
  padding: 15px;
  border-radius: 10px;
  background-color: #fff;
  -webkit-box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.15);
}

.shortcuts-info p {
  margin: 10px 0;
}
.tag {
  display: inline-block;
  padding: 3px;
  background-color: #03a9f4;
  color: #fff;
  border-radius: 5px;
  border-bottom: 1px solid #0288d1;
  font-size: 14px;
}



.close-btn {
  background-color: transparent !important;
  border-radius: 5px !important;
  color: #E6EAEF !important;
  font-weight: 600 ;
  border: 1px solid #384656 !important;
}


.close-btn:hover {
  background-color: #1565c0;
}

.close-btn:active,
.close-btn:focus {
  background-color: #074286;
}


.next-btn {
  font-weight: 700;
  color: #36454F;
  border-radius: 0.375rem;
  --tw-ring-offset-width: 2px;
  cursor: pointer;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
  transition-duration: 0.3s;
  --tw-ring-offset-color: #c7d2fe;
  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0
    var(--tw-ring-offset-width) var(--tw-ring-offset-color);
  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0
    calc(1px + 2px) rgb(59 130 246 / 0.5);
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow),
    var(--tw-shadow, 0 0 #0000);
  --tw-ring-offset-color: #c7d2fe;
    z-index: 1000 !important;
   position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.next-btn:hover {
  background-color: #e0e4ea;
}


/* Utility classes */
.text-center {
  text-align: center;
}
.bold {
  font-weight: 700;
}
.rounded-corners {
  border-radius: 50px;
}
.display-block {
  display: block;
}


.red-bg {
  background-color: #f44336;
  color: #fff;
}
.green-bg {
  background-color: #8bc34a;
  color: #fff;
}

.buttons-container{
  display: flex;
  justify-content: center; /* Centra horizontalmente los botones */
  align-items: center; /* Centra verticalmente los botones */
  gap: 10px; /* Espacio entre los botones */
  margin-top: 60px; 
  margin-bottom: 20px;
}

#next-btn,
#show-results-btn {
  margin: 0 auto;
  padding: 10px 25px;
}

#shortcuts-info-btn {
  display: none;
}



@media (min-width: 550px) {
  .quiz-started {
    max-width: 450px;
  }
  #quiz-content {
 max-width: 400px;
  }
  
  #notification{
  margin-top: -260px;
    margin-left: -15px;
  }
  
  
  .imgQuizContainer{
  margin-bottom: 0px;
}

  .answer {
    display: inline-block;
    width: 49%;
  }

  #shortcuts-info-btn {
    position: fixed;
    display: block;
    bottom: 0;
    right: 0;
    margin: 15px;
    padding: 5px 10px;
    font-size: 12px;
    border: 0;
    border-radius: 50px;
    color: #fff;
    background-color: #aaa;
    -webkit-transition: 0.3s all;
    -o-transition: 0.3s all;
    transition: 0.3s all;
    z-index: 1;
  }
  #shortcuts-info-btn:hover {
    background-color: #888;
  }

  #shortcuts-info-btn:active {
    background-color: #555;
  }
}

  .menu-bar {
    position: absolute;
            display: none;
            justify-content: space-around;
            background-color: black;
             padding: 10px 20px;
    color: white;
            list-style: none;
            margin: 0;
    margin-left: -200px;
    margin-top: -30px;
             border-radius: 10px;
            font-weight: 550;
  box-shadow: 0px 8px 20px -8px rgba(26, 33, 43, 0.5), 0px 4px 12px 0px rgba(26, 33, 43, 0.05), 0px 1px 3px 0px rgba(26, 33, 43, 0.25), 0px 1.5px 0.5px 0px #454D57 inset, 0px -3px 1px 0px rgba(0, 0, 0, 0.5) inset;
        }



.menu-bar:hover {
  color: white;
            text-decoration: none;
    transform: scaleX(1.03) scaleY(1.06) translateZ(0);
}

.menu-bar:active {
   color: white;
   text-decoration: none;
    transform: scale(0.96) translateZ(0);
}



.exit-btn {


  float: right;
  background-color: rgba(0, 0, 0, 0.8);
  border: none;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  color: white;
  font-size: 1.2rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s ease;
     z-index: 2000;
}

.exit-btn:hover {
  background-color: rgba(0, 0, 0, 0.5);
}
   


  



.player-header {
    padding: 6px 15px;
    background: #f5f5f5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ddd;
    flex-wrap: wrap;
}

.player-tools {
    display: flex;
    gap: 10px;
}

.tool-btn {
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 20px;
    padding: 5px 12px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}

.tool-btn:hover {
    background: #f0f0f0;
}

.tool-btn i {
    font-size: 16px;
}

.progress-display {
  padding: 1px 10px;
  background: #f9f9f9;
  border-bottom: 1px solid #eee;
  font-family: 'Roboto Mono', monospace;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
  flex-wrap: nowrap;
}

.progress-bar-container {
  flex: 1;
  min-width: 0;
  padding-right: 15px;
}

.time-displays-container {
  display: flex;
  gap: 5px;
  align-items: center;
}

.time-display {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 60px;
}

.time-display .label {
  font-size: 11px;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.5px;

}

.time-display .value {
  font-weight: bold;
  font-size: 14px;
  color: #333;
  margin-right: 15px;

}


.progress-bar {

  overflow: hidden;
  height: 12px;
  width: 130px;
  background: #e0e0e0;
  border-radius: 4px;
}


.progress-fill {
    height: 12px;
    background: gray; /* Green for the filled part */
    border-radius: 2px;
    transition: width 0.3s ease;
    display: block;
}

.player-container {
    flex: 1;
    width: 100%;
    min-height: 0; /* Para que el iframe no desborde */
}

.player-container iframe {
    width: 100%;
    height: 100%;
    border: none;
}

/* Estilo para metrónomo activo */
.metronome-active {
    background: #ffeb3b !important;
    border-color: #ffc107 !important;
}

/* Estilo para grabación activa */
.recording-active {
    background: #ffebee !important;
    border-color: #ef9a9a !important;
    color: #f44336 !important;
}

.recording-active i {
    color: #f44336 !important;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}



.close-btn2 {

  top: 1.7rem;
  right: 1.7rem;
  background-color: rgba(0, 0, 0, 0.8);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  color: white;
  font-size: 1.2rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.close-btn2:hover {
  background-color: rgba(0, 0, 0, 0.5);
}


@media(max-width: 550px){
  #pdfTitle{
    display: none;
  }
    .player-header {
    justify-content: space-between; /* Fuerza los elementos restantes a los extremos */
  }
  
  .player-tools {
    margin-left: auto; /* Empuja a la derecha */
  }
}


/* Efecto vidrio para métricas en móvil */
.glass-effect {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 10px;
  padding: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Contenedor de métricas para móvil */
.mobile-metrics {
  display: flex;
  justify-content: space-around;
  margin-top: -30px;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
}

.metric-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 10px;
}

.metric-value {
  font-weight: bold;
  font-size: 16px;
  color: white;
}

.metric-label {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 4px;
}

/* Contenedor de métricas para desktop */
.desktop-metrics {
  margin-top: 20px;
}

.metric-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 15px;
}

.progress-container {
  grid-column: span 2;
  margin-bottom: 25px; 
}


.progress-percentage {
  font-size: 13px;
  margin-top: -3px !important;
  margin-right: 205px !important;
  color: rgba(255, 255, 255, 0.8);
  display: block;
  text-align: center;
}

/* Responsive */
@media (max-width: 767px) {
  .desktop-metrics {
    display: none;
  }
  
  .mobile-metrics {
    display: flex;
  }
}

@media (min-width: 768px) {
  .mobile-metrics {
    display: none;
  }
  
  .desktop-metrics {
    display: block;
  }
  
  .preview-content {
    flex-direction: row;
  }
}
  
  
.tool-btn.active {
  background: white;
  border-color: #bdbdbd;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
}
.recording-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;

}

.left-controls {
  display: flex;
  gap: 8px;
  margin-right: auto; /* Empuja todo a la izquierda */
}

.right-controls {
  display: flex;
  gap: 8px;
  margin-left: auto; /* Empuja todo a la derecha */
}

.metronome-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.bpm-control {
  display: flex;
  align-items: center;
  gap: 4px;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 12px;
  padding: 4px 8px;
}

.bpm-buttons {
  display: flex;
}

.bpm-btn {
  background: transparent;
  border: none;
  padding: 4px 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.2s;
}

.bpm-btn:hover {
  background: rgba(0, 0, 0, 0.1);
}

.bpm-label {
  font-family: 'Roboto Mono', monospace;
  font-size: 14px;
  min-width: 50px;
  text-align: center;
}

/* Estilos para estados activos */
.record-btn.active {
  color: #f44336;
  animation: pulse 1.5s infinite;
}

.metronome-btn.active {
  color: #FF9800;
  animation: pulse 0.5s infinite alternate;
}

@keyframes pulse {
  from { opacity: 1; }
  to { opacity: 0.7; }
}
  
  
  .record-btn.active {
  color: #f44336;
  animation: pulse 1.5s infinite;
}



.recording-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.modal-content2 {
  background: white;
  padding: 20px;
  border-radius: 10px;
  width: 90%;
  max-width: 800px;
  position: relative;
}

#recordingVisualizer {
  display: flex;
  justify-content: center;
  transform: scale(0.5);
}

@media (max-width: 600px){
    #recordingVisualizer {
  transform: scale(0.4);
}
}

@media (max-width: 470px){
    #recordingVisualizer {
  transform: scale(0.3);
}
}


.visualizer-container {
  width: 100%;
  overflow: hidden;
  margin: 0 auto;
  position: relative;
}
  
  
   .recording-indicator {
    position: absolute;
    top: 10px;
    left: 10px;
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.7);
    padding: 5px 10px;
    border-radius: 20px;
    color: white;
    font-size: 14px;
    z-index: 100;
  }
  
  .recording-dot {
    width: 10px;
    height: 10px;
    background-color: red;
    border-radius: 50%;
    margin-right: 8px;
    animation: pulse 1.5s infinite;
  }
  
  .processing-indicator {
    position: absolute;
    top: 10px;
    left: 10px;
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.7);
    padding: 5px 10px;
    border-radius: 20px;
    color: white;
    font-size: 14px;
    z-index: 100;
  }
  
  .spinner {
    width: 16px;
    height: 16px;
    margin-right: 8px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
  }
  
  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  


.saved-recordings-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  
  .saved-recordings-modal .modal-content {
    background: white;
    padding: 25px;
    border-radius: 10px;
    width: 80%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .recordings-list {
    margin-top: 35px;
  }
   
   .recording-item {
    padding: 12px 0;
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
  }

  .recording-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
  }

  .recording-details {
    flex-grow: 1;
    text-align: left;
  }

  .recording-name {
    font-weight: 500;
    margin-bottom: 4px;
  }

  .recording-date {
    font-size: 12px;
    color: #666;
  }

  .recording-actions {
    display: flex;
    gap: 8px;
  }
  
  .no-recordings {
    text-align: center;
    padding: 20px;
    color: #666;
  }
  
</style>

<body ng-app="materializeApp">

  <!-- End Header -->
  <!-- Tabs Nav Start -->    
  <div class="mainContain"> 
     
    
     <div class="mobile-menu col s12" style="overflow-x: auto;">
    <ul class="tabs lvlmenu">
      <li class="tab levelp"><a href="#test1">Preparatory</a></li>
      <li class="tab level1"><a href="#test2">&nbsp&nbsp&nbsp&nbsp Level 1 &nbsp&nbsp&nbsp&nbsp</a></li>
       <li class="tab level2"><a href="#test3">&nbsp&nbsp&nbsp&nbsp Level 2 &nbsp&nbsp&nbsp&nbsp</a></li>
        <li class="tab level3"><a href="#test4">&nbsp&nbsp&nbsp&nbsp Level 3 &nbsp&nbsp&nbsp&nbsp</a></li>
         <li class="tab level4"><a href="#test5">&nbsp&nbsp&nbsp&nbsp Level 4 &nbsp&nbsp&nbsp&nbsp</a></li>
          <li class="tab level5"><a href="#test6">&nbsp&nbsp&nbsp&nbsp Level 5 &nbsp&nbsp&nbsp&nbsp</a></li>
    </ul>
  </div>
    <!-- Tabs Nav End -->

     
       <div style="width: 100%;" class="lsnContain">   
    <div id="test1" class="col s12" ng-controller="levelP">
  <!-- CSS Course Start -->
       
      <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1DV20wj6bNahmdY8v0ziM3gbvUudhNjcV">
      <div class="job-logos"> 
 
         <img src="https://lh3.googleusercontent.com/d/1ipxfJgi9fNJPTrY7FW8ETlHya2U7R-rq" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>

      
      </div>  
      <div class="job-explain-content">
      <div class="job-title-wrapper">
       <div class="job-card-title2" >Preparatory</div>
       <div class="job-action" style="color: #F44336" ng-if="lvl > 0"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #F44336" ng-if="lvl == 0"> 
          PROGRESS: {{progress}} %
       </div> 
       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >12 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>
        
     
        
         
               </div>
     </div>
      
  <ul class="collection with-header levelp" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>  
    </li>
     
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">  
        <div>{{lesson.name}} 
   <span class="secondary-content" ng-if="loading || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 0 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span>
       </div>
      </a>   
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton ">
     <div class="linehorizontal"></div>        
        <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 0) || lvl > 0) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons" >{{material.icon}}</i>
            {{material.title}}<span class="secondary-content"></span></div>
          <div class="collapsible-body">
               
  <div class="row">  
    <div class="col s12"> 
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9">
    
  <!--     
   <span class="text-inside"  ng-click="goTo(activity.url)"  current-status="{{currentlsns[activity.index].status}}"  ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
         
<span class="text-inside js-trigger-video-modal"  ng-click="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
-->
    <span class="text-inside js-trigger-video-modal"  
      ng-click="toggle_video_modal(activity)" 
      ng-if="activity.media === 'video'">
  <i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}
</span>
 <span class="text-inside"  
      ng-click="toggle_pdf_modal(activity)" 
      ng-if="activity.media === 'pdf'">
  <i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}
</span>
 <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span> 
<!-- <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=5 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span> -->
            
  </li>
      </ul> 
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
      
    
        
</div>




    








<div id="test2" class="col s12" ng-controller="level1">
  <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1t9Txe8so7uIdhhJCb0LDLmcEUd5POURI">
      <div class="job-logos">

         <img src="https://lh3.googleusercontent.com/d/12vRm1LT0ZrQo8X0qwaHD4yyVa4ggp-ja" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>


      </div>  
     
      <div class="job-explain-content"> 
       <div class="job-title-wrapper">
       <div class="job-card-title2" >Level 1</div>
       <div class="job-action" style="color: #9024dc" ng-if="lvl > 1"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #9024dc" ng-if="lvl == 1"> 
          PROGRESS: {{progress}} %
       </div> 

       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >9 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>
   
      

        
     <!--   <div class="overview-text-subheader" style="margin-top: 15px;" ng-if="status != 'ACTIVO'">Este nivel establece los fundamentos del concepto de tonalidad.</div>  -->
               </div>
     </div>
    <!-- CSS Course Start -->
      <ul class="collection with-header level1" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>
    </li>
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">
         <div>{{lesson.name}}<span class="secondary-content" ng-if="lvl < 1 || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 1 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span></div>
      </a> 
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton">
     <div class="linehorizontal" ></div>
        <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 1) || lvl > 1) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons">{{material.icon}}</i>
            {{material.title}}</div>
          <div class="collapsible-body">
            
  <div class="row">
    <div class="col s12">
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9">
            <i class="material-icons" style="position: absolute; font-size: 15px; margin-left: -15px; margin-top: 10px; " ng-if="activity.media != 'video' && lvl === 1 && lsn === lesson.id && currentlsns[activity.index].status == 'A corrección'">cancel</i> 
                 <i class="material-icons" style="position: absolute; font-size: 15px; margin-left: -15px; margin-top: 10px; " ng-if="activity.media != 'video' && lvl === 1 && lsn === lesson.id && currentlsns[activity.index].status == 'En revisión'">pending_actions</i>
                <i class="material-icons" style="position: absolute; font-size: 15px; margin-left: -15px; margin-top: 10px; " ng-if="activity.media != 'video' && (lvl > 1 || lesson.id < lsn)">verified</i> 
                    <i class="material-icons" style="position: absolute; font-size: 15px; margin-left: -15px; margin-top: 10px; " ng-if="activity.media != 'video' && lvl === 1 && lsn === lesson.id && currentlsns[activity.index].status == 'Evaluada'">verified</i> 
            
    <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=1 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
          <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>  
<span class="text-inside js-trigger-video-modal"  onclick="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
  </li>
      </ul>
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>





    <div id="test3" class="col s12" ng-controller="level2">
      <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1OBKvJFaug3c1NwjSYsoz2xgA_9xQBg-W">
      <div class="job-logos">

         <img src="https://lh3.googleusercontent.com/d/1Xlt1j0GK5XiEixmZv3fTBvWvP-NB38KK" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>


      </div> 
      <div class="job-explain-content">
       <div class="job-title-wrapper">
       <div class="job-card-title2" >Level 2</div>
       <div class="job-action" style="color: #1894cc" ng-if="lvl > 2"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #1894cc" ng-if="lvl == 2"> 
          PROGRESS: {{progress}} %
       </div> 

       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >9 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>

               </div>
     </div>
      <!-- JAVASCRIPT Course Start -->
      <ul class="collection with-header level2" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>
    </li>
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">
        <div>{{lesson.name}}
          <span class="secondary-content" ng-if="lvl < 2 || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 2 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span>
          </div>
      </a>
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton">
     <div class="linehorizontal" ></div>
       <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 2) || lvl > 2) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons" >{{material.icon}}</i>
            {{material.title}}</div>
          <div class="collapsible-body">
            
  <div class="row">
    <div class="col s12">
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9">
    <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=2 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
          <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>  
<span class="text-inside js-trigger-video-modal"  onclick="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
  </li>
      </ul>
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
      <!-- JAVASCRIPT Course End -->
    </div>
    
    
    
    
    <div id="test4" class="col s12" ng-controller="level3">
      <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1ncvdKydLJlqM1mdG-KJeF18eZHAgGJAa">
      <div class="job-logos">

         <img src="https://lh3.googleusercontent.com/d/1GDqLhFuvMtlsAdXpyodtEzp_pZKN5Ict" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>

 
      </div> 
      <div class="job-explain-content">
       <div class="job-title-wrapper">
       <div class="job-card-title2" >Level 3</div>
       <div class="job-action" style="color: #489454" ng-if="lvl > 3"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #489454" ng-if="lvl == 3"> 
          PROGRESS: {{progress}} %
       </div> 

       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >9 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>

               </div>
     </div>
      
      <ul class="collection with-header level3" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>
    </li>
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">
        <div>{{lesson.name}}<span class="secondary-content" ng-if="lvl < 3 || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 3 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span>
</div>
      </a>
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton">
     <div class="linehorizontal" ></div>
     <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 3) || lvl > 3) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons" >{{material.icon}}</i>
            {{material.title}}</div>
          <div class="collapsible-body">
            
  <div class="row">
    <div class="col s12">
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9">
    <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=3 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
          <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>  
<span class="text-inside js-trigger-video-modal"  onclick="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
  </li>
      </ul>
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>



<div id="test5" class="col s12" ng-controller="level4">
  <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1hu2CqX6lftMqEB-B4s7Tpt0-0oz3pONV">
      <div class="job-logos">

         <img src="https://lh3.googleusercontent.com/d/1vGByXqhEIxpPd9SbFFPsmb-5KzSVH5Im" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>
    

      </div> 
      <div class="job-explain-content">
     <div class="job-title-wrapper">
       <div class="job-card-title2" >Level 4</div>
       <div class="job-action" style="color: #fa9223" ng-if="lvl > 4"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #fa9223" ng-if="lvl == 4"> 
          PROGRESS: {{progress}} %
       </div> 

       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >9 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>
  
 

     
               </div>
     </div>
  
      <ul class="collection with-header level4" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>
    </li>
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">
       <div>{{lesson.name}}<span class="secondary-content" ng-if="lvl < 4 || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 4 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span>
          </div>
      </a>
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton">
     <div class="linehorizontal" ></div>
        <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 4) || lvl > 4) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons">{{material.icon}}</i>
            {{material.title}}</div>
          <div class="collapsible-body">
            
  <div class="row">
    <div class="col s12">
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9"> 
    <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=4 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
          <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>  
<span class="text-inside js-trigger-video-modal"  onclick="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
  </li>
      </ul>
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>


<div id="test6" class="col s12" ng-controller="level5">
  <div class="job-explain" >
      <img class="job-bg" src="https://lh3.googleusercontent.com/d/1WkWRHBpSj2H9rHn_NKp2aRoRdrEkBpw0">
      <div class="job-logos">

         <img src="https://lh3.googleusercontent.com/d/1NGLKJQx-UrWNI4_r5zh5EAChJ03k0LGi" width="80" height="80" style="margin-right: 10px; border-radius: 15px;"/>

      </div> 
      <div class="job-explain-content">
      <div class="job-title-wrapper">
       <div class="job-card-title2" >Level 5</div>
       <div class="job-action" style="color: #485cb4" ng-if="lvl > 5"> 
         <i class="locklvl ri-award-fill" style="font-size: 25px; margin-right: 5px; " > </i> COMPLETED
       </div> 
       <div class="job-action" style="color: #485cb4" ng-if="lvl == 5"> 
          PROGRESS: {{progress}} %
       </div> 

       </div>
       <div class="job-subtitle-wrapper">
          <div class="company-name" >9 lessons <br><span class="comp-location">This foundational music course covers: intervals, positions, and core elements as Rhythm, Melody, Harmony Perfect for beginners to grasp essential theory and practical skills.</span></div>
       </div>


               </div>
     </div>
  
      <ul class="collection with-header level5" ng-repeat="data in allData">
    <li class="collection-header">
      <h4 >{{data.block}}</h4>
    </li>
    <li class="collection-item" ng-repeat="lesson in data.lessons">
      <a href="#lesson" ng-init="lesson.showButton = false" ng-click="lesson.showButton = !lesson.showButton">
      <div>{{lesson.name}}<span class="secondary-content" ng-if="lvl < 5 || status !== 'ACTIVO'"><i class="material-icons">lock</i></span>
          <span class="secondary-content" ng-if="lvl == 5 && status == 'ACTIVO'">
          <i class="material-icons" ng-if="lesson.id == lsn">schedule</i>
          <i class="material-icons" ng-if="lesson.id > lsn">lock</i>
          </span></div>
      </a>
      
      <ul class="collapsible popout" data-collapsible="accordion" ng-if="lesson.showButton">
     <div class="linehorizontal" ></div>
        <li ng-repeat="material in lesson.material" class="container-lessons" ng-if="((lesson.id <= lsn && lvl == 5) || lvl > 5) && status === 'ACTIVO'">
          <div class="collapsible-header">
   <i class="material-icons" >{{material.icon}}</i>
            {{material.title}}</div>
          <div class="collapsible-body">
            
  <div class="row">
    <div class="col s12">
      <ul class="tabs" style="display: flex; white-space: nowrap;">
          <li ng-repeat="activity in material.activity" class="tab col s9">
    <span class="text-inside"  onclick="showModal(this)" data-pdf-id="{{activity.url}}" this-lvl=5 current-lvl="{{lvl}}" lsn-id="{{lesson.id}}" current-lsn="{{lsn}}" current-status="{{currentlsns[activity.index].status}}" current-index="{{activity.index}}" ng-if="activity.media == 'pdf'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
          <span class="text-inside"  this-lvl="{{lvl}}" quiz-icon="{{activity.icon}}" quiz-title="{{activity.type}}" quiz-subtitle="{{activity.title}}" data-package="{{activity.package}}" onclick="showQuiz(this)" ng-if="activity.media == 'quiz'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>  
<span class="text-inside js-trigger-video-modal"  onclick="toggle_video_modal(this)" data-youtube-id="{{activity.url}}" ng-if="activity.media == 'video'"><i class="material-icons inside">{{activity.icon}}</i>{{activity.type}}</span>
  </li>
      </ul>
    </div>
     </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>
  </div>



    <div ng-controller="lvlMenu">  
   <div class="col s12 desktop-menu" >
  <ul class="tabs lvlmenu"  > 
      <li class="tab levelp"> 
    <a href="#test1">

      <div class="job-overview-card">
        <div class="job-card overview-card">
          <div class="overview-wrapper">
            <img src="https://lh3.googleusercontent.com/d/1ipxfJgi9fNJPTrY7FW8ETlHya2U7R-rq" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail">
              <div class="job-card-title" style="color: #F44336">Preparatory</div>
              <div class="job-card-subtitle" style="margin-left: -52px"> Basics</div> 
            </div> 
         
          </div> 
          <div class="job-overview-buttons" ng-if="lvl > 0 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progress: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 0 && status == 'ACTIVO'">
  <div class="search-buttons time-button">IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>

   <div class="job-overview-buttons" ng-if="status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div> 
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>
        </div>
      </div>
    </a>
  </li>
        <li class="tab level1" >
          <a href="#test2">
       
            <div class="job-overview-card">
        <div class="job-card overview-card">
          <div class="overview-wrapper">
            <img src="https://lh3.googleusercontent.com/d/12vRm1LT0ZrQo8X0qwaHD4yyVa4ggp-ja" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail">
              <div class="job-card-title" style="color: #9024dc">Level 1</div>
             <div class="job-card-subtitle"> Beginner</div> 
            </div> 
         
          </div>
        <div class="job-overview-buttons" ng-if="lvl > 1 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progress: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 1 && status == 'ACTIVO'">
  <div class="search-buttons time-button" >IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>
  
   <div class="job-overview-buttons" ng-if="lvl<1 || status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div>
 
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>  
        </div>
      </div>
          </a>
          </li>
        <li class="tab level2" >
          <a href="#test3"> 
            <div class="job-overview-card">
        <div class="job-card overview-card"> 
          <div class="overview-wrapper">
            <img src="https://lh3.googleusercontent.com/d/1Xlt1j0GK5XiEixmZv3fTBvWvP-NB38KK" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail"> 
              <div class="job-card-title" style="color: #1894cc">Level 2</div>
              <div class="job-card-subtitle"> Beginner</div> 
            </div>
         
          </div>
         <div class="job-overview-buttons" ng-if="lvl > 2 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progreso: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 2 && status == 'ACTIVO'">
  <div class="search-buttons time-button" >IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>
 
   <div class="job-overview-buttons" ng-if="lvl<2 || status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div> 
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>  
        </div>
      </div>
          </a> 
          </li>
          <li class="tab level3">
            <a href="#test4">  
            <div class="job-overview-card">
        <div class="job-card overview-card">
          <div class="overview-wrapper">  
            <img src="https://lh3.googleusercontent.com/d/1GDqLhFuvMtlsAdXpyodtEzp_pZKN5Ict" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail">
              <div class="job-card-title" style="color: #489454; margin-left: -42px">Level 3</div>
            <div class="job-card-subtitle">Early Intermediate</div> 
            </div>
         
          </div>
       <div class="job-overview-buttons" ng-if="lvl > 3 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progress: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 3 && status == 'ACTIVO'">
  <div class="search-buttons time-button" >IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>
 
   <div class="job-overview-buttons" ng-if="lvl<3 || status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div>
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>  
        </div>
      </div>
            </a>
            </li> 
    <li class="tab level4">
      <a href="#test5">
        
            <div class="job-overview-card">
        <div class="job-card overview-card">
          <div class="overview-wrapper">
            <img src="https://lh3.googleusercontent.com/d/1vGByXqhEIxpPd9SbFFPsmb-5KzSVH5Im" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail">
              <div class="job-card-title" style="color: #fa9223; margin-left: -15px">Level 4</div>
             <div class="job-card-subtitle"> Intermediate</div> 
            </div>
         
          </div>
       <div class="job-overview-buttons" ng-if="lvl > 4 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progress: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 4 && status == 'ACTIVO'">
  <div class="search-buttons time-button" >IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>
 
   <div class="job-overview-buttons" ng-if="lvl<4 || status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div>  
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>  
        </div>
      </div>
      </a>
      </li>
      <li class="tab level5">
        <a href="#test6"> 
            <div class="job-overview-card">
        <div class="job-card overview-card">
          <div class="overview-wrapper">
            <img src="https://lh3.googleusercontent.com/d/1NGLKJQx-UrWNI4_r5zh5EAChJ03k0LGi" width="50" height="50" style="margin-right: 10px; border-radius: 10px;" />
            <div class="overview-detail">
              <div class="job-card-title" style="color: #485cb4; margin-left: -15px">Level 5</div>
              <div class="job-card-subtitle" >Intermediate </div> 
            </div>
          
          </div>
       <div class="job-overview-buttons" ng-if="lvl > 5 && status == 'ACTIVO'">
    <div class="search-buttons time-button" style="color: green">COMPLETED</div>
    <div class="search-buttons level-button" style="color: green">Progress: 100 %</div>  
    <i class="locklvl ri-award-fill" style="color: orange !important"> </i>
   </div>
 
    <div class="job-overview-buttons" ng-if="lvl == 5 && status == 'ACTIVO'">
  <div class="search-buttons time-button" >IN PROGRESS</div>
  <div class="search-buttons level-button">Progress: {{progress}} %</div>
  <i class="locklvl ri-time-line"> </i>
   </div>
 
   <div class="job-overview-buttons" ng-if="lvl<5 || status != 'ACTIVO'">
<div class="search-buttons time-button" style="color: black;">BLOCKED</div>  
<i class="locklvl ri-lock-fill" style="background: silver;" > </i>
   </div>  
        </div>
      </div>
        </a>
        </li>
      </ul>
    </div>
</div>


 
  </div> 
  
  
  
   <div class="video-modal" ng-controller="slider">
    <div id="video-modal-content" class="video-modal-content">
      
      
      <div id="slideshow"> 
      
   <div class="hideMe">
    <div class="x-tempo" onclick="close_video_modal()">
       <a 
          href="#" 
         
        >
          <!-- X close video icon -->
          <svg 
            version="1.1" 
            xmlns="http://www.w3.org/2000/svg" 
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0"
            y="0"
            viewBox="0 0 32 32" 
            style="enable-background:new 0 0 32 32;" 
            xml:space="preserve" 
            width="24" 
            height="24" 
          >
            <g id="icon-x-close" >
                <path fill="#ffffff" d="M30.3448276,31.4576271 C29.9059965,31.4572473 29.4852797,31.2855701 29.1751724,30.980339 L0.485517241,2.77694915 C-0.122171278,2.13584324 -0.104240278,1.13679247 0.52607603,0.517159487 C1.15639234,-0.102473494 2.17266813,-0.120100579 2.82482759,0.477288136 L31.5144828,28.680678 C31.9872448,29.1460053 32.1285698,29.8453523 31.8726333,30.4529866 C31.6166968,31.0606209 31.0138299,31.4570487 30.3448276,31.4576271 Z" id="Shape"></path>
                <path fill="#ffffff" d="M1.65517241,31.4576271 C0.986170142,31.4570487 0.383303157,31.0606209 0.127366673,30.4529866 C-0.12856981,29.8453523 0.0127551942,29.1460053 0.485517241,28.680678 L29.1751724,0.477288136 C29.8273319,-0.120100579 30.8436077,-0.102473494 31.473924,0.517159487 C32.1042403,1.13679247 32.1221713,2.13584324 31.5144828,2.77694915 L2.82482759,30.980339 C2.51472031,31.2855701 2.09400353,31.4572473 1.65517241,31.4576271 Z" id="Shape"></path>
            </g>
          </svg>
        </a>
     </div>
     
     
     
     
    <svg id="downArrow" class="arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
        <g stroke-linejoin="round" stroke-linecap="round" >
            <circle r="46" cx="50" cy="50" />
            <polyline points="25 40, 50 70, 75 40" ></polyline>
        </g>
    </svg>
    <svg id="upArrow" class="arrow" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 100 100">
        <g stroke-linejoin="round" stroke-linecap="round" >
            <circle r="46" cx="50" cy="50" />
            <polyline points="25 60, 50 30, 75 60" ></polyline>
        </g>
    </svg>
    <div id="masterWrap">
    <div id="panelWrap">
      
  
       
    </div>
      </div>
    <div class="dots">
    </div>
     
     
     
</div>   
      </div>
 
    </div>
    <div class="overlay"></div>
</div>
  
 



 <div id="modalPDF" class="modal-container" ng-controller="pdfView">
        <div class="modal-background">
            <div class="modal-doc">
                        
                <div class="player-header">

                   <button id="fullscreen-btn" class="close-btn2" style="left: 10px">
      <i class="ri-fullscreen-fill" id="fullscreen-icon"></i>
        </button>


      <h4 id="pdfTitle"></h4>
      <div class="player-tools">
         <button class="tool-btn recording-btn"
          ng-click="setActivePanel('recording')"
          ng-class="{'active': activePanel === 'recording'}">

    Grabación
  </button>
        <button class="tool-btn metrics-btn" 
          ng-click="setActivePanel('session')"
          ng-class="{'active': activePanel === 'session'}">
     Progreso
  </button>

  

         <button class="close-btn2" onclick="closemodal()">
      <i class="ri-close-large-line" ></i>
        </button>
      </div>
    </div>
    
    <div class="progress-display">
  <div class="progress-info" ng-show="activePanel === 'session'">
    <div class="progress-bar-container">
      <div style="text-align: left; ">Progreso: {{getProgressPercentage(0,5)}}%</div>
   <div class="progress-bar" >
  <div class="progress-fill" ng-style="{'width': getProgressPercentage(0,5) + '%', 'background': getProgressColor(2,5)}"></div>
</div>
    </div>


    <div class="time-displays-container">
       <div class="time-display">
        <span class="value"> 0 / 5</span>
         <span class="label" >Ejercicios</span>
        <span class="label" style="margin-right: 15px" ng-if="yes">Compases</span>
      </div>
    </div>

<!--
    <div class="progress-bar-container">
      <div style="text-align: left; ">Progreso: 100%</div>
   <div class="progress-bar" >
  <div class="progress-fill" ng-style="{'width': 100 + '%', 'background': 'green'}"></div>
</div>
    </div>
    <div class="time-displays-container">
       <div class="time-display">
        <span class="value" style="margin-right: -3px"> Completado</span>
      </div>
    </div>
-->



  </div>
      
        <div class="progress-info" ng-show="activePanel === 'recording'">

          <div class="recording-indicator" ng-show="isRecording">
    <div class="recording-dot"></div>
    <span>Grabando...</span>
  </div>
  
  <div class="processing-indicator" ng-show="isProcessing">
    <div class="spinner"></div>
    <span>Procesando...</span>
  </div>

 <div class="recording-controls">
  <!-- Controles izquierdos -->
  <div class="left-controls">
    <button class="tool-btn record-btn" ng-click="toggleRecording()" ng-class="{'active': isRecording}">
     <i class="ri-mic-line"></i>
    </button>
    <button class="tool-btn play-btn" ng-click="openRecordings()">
     <i class="ri-folder-music-line"></i>
    </button>
  </div>
  
  <!-- Controles derechos -->
  <div class="right-controls">
    <audio id="metronomeAudio" src="https://dashboard.mozartacademy.mx/media/metronom.mp3" loop style="display: none;"></audio>
   <div class="metronome-control">
  <button class="tool-btn metronome-btn" ng-click="toggleMetronome()" ng-class="{'active': metronomeActive}">
    <i class="ri-timer-flash-line"></i>
  </button>
  <div class="bpm-control">
    <button class="bpm-btn" ng-mousedown="adjustBPM(-1, $event)" ng-touchstart="adjustBPM(-1, $event)">
      <i class="ri-subtract-line"></i>
    </button>
    <span class="bpm-label">{{metronomeBPM}} BPM</span>
    <button class="bpm-btn" ng-mousedown="adjustBPM(1, $event)" ng-touchstart="adjustBPM(1, $event)">
      <i class="ri-add-line"></i>
    </button>
  </div>
</div>

  </div>
</div>
  </div>

      
</div>

    
  <!--   <iframe id="drive" ng-src="{{trustAsResourceUrl(currentlsns[currentActivity.index].pdf)}}" frameborder="0" allow="microphone; midi"></iframe>  -->
   <iframe id="drive" ng-src="{{trustAsResourceUrl(currentActivity.url)}}" frameborder="0" allow="microphone; midi"></iframe> 
  <div class="recording-modal" ng-show="showRecordingModal">
     <button class="close-btn2" ng-click="closeRecordingModal()" style="position: absolute; right: 0; top: 0; ">
      <i class="ri-close-large-line"></i>
    </button>
    <div class="modal-content2">
 
      <midi-player id="recordingPlayer" sound-font visualizer="#recordingVisualizer" src=""></midi-player>
     <div class="visualizer-container">
  <midi-visualizer id="recordingVisualizer" 
                   type="waterfall"
src=""> 
  </midi-visualizer>
</div>
     
    </div>
  </div>

  <div class="saved-recordings-modal" ng-show="showSavedRecordingsModal">
        <div class="modal-content">
          <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; position: relative;">
    <h3 style="font-size: 20px; margin: 0;">Tus Grabaciones</h3>
    <button class="close-btn2" ng-click="closeSavedRecordingsModal()" style="position: absolute; right: 0; top: 0; ">
      <i class="ri-close-large-line"></i>
    </button>
  </div>
          <div class="recordings-list">
            <div class="recording-item" ng-repeat="recording in audios">
              <div class="recording-info">
              <div class="recording-details">
            <div class="recording-name">{{recording.title}}</div>
            <div class="recording-date">{{recording.date | date:'medium'}}</div>
          </div>
          <div class="recording-actions">
            <button class="play-btn" ng-click="playSavedRecording(recording)">
              <i class="ri-play-line"></i>
            </button>
            <button class="delete-btn" ng-click="deleteRecording(recording.id)">
              <i class="ri-delete-bin-line"></i>
            </button>
          </div>
              </div>
            </div>
            <div class="no-recordings" ng-show="audios.length === 0">
              No hay grabaciones guardadas
            </div>
          </div>
         
        </div>
      </div>

            </div> 
        </div>
    </div>

  
  
  
    <div id="questionaire" class="modal-container">
        <div class="modal-background">
         
            <div style="margin-top: -100px;">

<div class="quiz">
  <article id="quiz" class="quiz-intro">
    <div id="quiz-bg">
      <i class="material-icons" id="quizIco">quiz</i>
      <span style="position: absolute; margin-top: 70px; margin-left: 40px; color: white" id="questionTotal">10 preguntas</span>
    </div>
    <section id="quiz-body"> 
      <h4>Quiz</h4>      
      <h1>Resumen de lección</h1> 
      <div class="buttons-container">
        <button type="button" class="btn blue-btn rounded-corners" onclick="closeQuiz()">Cerrar</button>
        <button type="button" id="start-quiz-btn" class="btn blue-btn rounded-corners">Iniciar</button>
      </div>
    </section>
  </article>

  <!-- Contenido del quiz (oculto inicialmente) -->
  <article id="quiz-content" class="quiz-started" style="display: none;">
      <button class="exit-btn" onclick="destroyQuiz()"> <i class="ri-close-line"></i> </button>   
  <div id="blurWrapper">
    <div id="progress-container"><span id="progress"></span></div>
    <div id="stats">
      <p>Pregunta: <span id="questionNumber"></span></p> 
      <p>Puntaje: <span id="score"></span></p>
      <p>Tiempo: <span id="timer"></span></p>
    </div>
  </div>
    <section id="answers"></section>

  </article>  

  <!-- Resultados del quiz (ocultos inicialmente) -->
  <section id="results" class="text-center" style="display: none;">  
    <h2 class="bold">Estos son tus resultados:</h2>
    <p id="percentage"></p>
    <p>Obtuviste <span class="bold" id="correctAnswers"></span> de <span class="bold" id="totalQuestions"></span> preguntas correctas.</p>
    <p style="margin-top: 10px;">Tiempo empleado: <span class="bold" id="finalTime"></span></p>
    <div class="buttons-container">
      <button type="button" id="close-results-btn" class="btn close-btn">Cerrar</button>
      <button type="button" id="start-over-btn" class="btn close-btn">De nuevo</button> 
    </div>
  </section>
</div>

</div>
</div>
</div>
  

</body>



<script>
  $(document).ready(function() {
  $('ul.tabs').tabs();
    
    $('ul.tabs li a').on('click', function() {
    $('html, body').animate({
      scrollTop: 0
    }, 500); 
  });
});

 
  

  

  //Angular Materialize

  //Angular Materialize
var app = angular.module('materializeApp', ['ui.materialize']);
app.factory('SharedState', function($http, $q) {
  var requestData = {
    action: "getUserData",
  //  token: localStorage.getItem('MStoken')
    token: "U2FsdGVkX1/pI1bZ0ubPnMIbtexAViX2jWJbRcC96D2QsP6GULGhs1YxuPWTKn4L"
  };

  var config = {
    headers: {
      "Content-Type": "text/plain;charset=utf-8"
    }
  };
  
  
var currentActivity = null;

  var activityFunctions = {
    setCurrentActivity: function(activity) {
      currentActivity = activity;
    },
    getCurrentActivity: function() {
      return currentActivity;
    },
    clearCurrentActivity: function() {
      currentActivity = null;
    }
  };
  

  var getNum = function() {
    var deferred = $q.defer();

    $http.post('https://script.google.com/macros/s/AKfycbxXD35z5FSf_m_dwBt5qcBwWq2L7IDc7KBrYGfix6hUa4kvJ1TFpjU82NltFXezUroGgQ/exec', requestData, config)
      .then(function(response) {
        deferred.resolve({
          name: response.data.name,
          stage: JSON.parse(response.data.stage),
          audios: JSON.parse(response.data.audios),
          status: response.data.status,

        });
      }, function(error) {
        deferred.reject(error);
      });

    return deferred.promise;
  };

  return {
    getNum: getNum,
getActivity: function() {
      return activityFunctions;
    }
  };
});
 
  app

  .controller('lvlMenu', ["$scope", "SharedState", function($scope, SharedState){ 
      SharedState.getNum().then(function(data) {
        $scope.lvl = data.stage.lvl;
     $scope.status = data.status;
        
        if(data.lvl == 1){
          $('ul.tabs').tabs('select_tab', 'test2');
        }else if(data.lvl == 2){
          $('ul.tabs').tabs('select_tab', 'test3');
        }else if(data.lvl == 3){
          $('ul.tabs').tabs('select_tab', 'test4');
        }
        
  })

    
  }])
  
  
  
.controller('slider', ["$scope", "SharedState", "$sce", function($scope, SharedState, $sce) {
  
   $scope.trustAsResourceUrl = function(url) {
    return $sce.trustAsResourceUrl(url);
  };
  
   $scope.$watch(function() {
    return SharedState.getActivity().getCurrentActivity();
  }, function(newActivity) {
    $scope.currentActivity = newActivity;

     
  });
  
   
}])

.controller('pdfView', ["$scope", "SharedState", "$sce", "$timeout", function($scope, SharedState, $sce, $timeout) {
  
   $scope.trustAsResourceUrl = function(url) {
    return $sce.trustAsResourceUrl(url);
  };
  
   $scope.$watch(function() {
    return SharedState.getActivity().getCurrentActivity();
  }, function(newActivity) {
    $scope.currentActivity = newActivity;
  });

   SharedState.getNum().then(function(data) {
    $scope.lsn = data.stage.lsn;
    $scope.audios = data.audios;
      $scope.currentlsns = filterCurrent(data.lssons);
  })

   function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
   }


   $scope.activePanel = 'session'; // Panel por defecto
$scope.setActivePanel = function(panel) {
  if ($scope.activePanel === panel) return;
  $scope.activePanel = panel;
};

$scope.getProgressPercentage = function(ready, total) {
    return Math.round((ready / total) * 100);
};

  $scope.getProgressColor = function(ready, total) {
  const percentage = $scope.getProgressPercentage(ready, total) || 0;
  // HSL: 0 (rojo) to 120 (verde)
  const hue = Math.round((percentage / 100) * 120);
  return 'hsl(' + hue + ', 85%, 50%)';
};


  $scope.metronomeActive = false;
$scope.metronomeBPM = 60; // Valor inicial igual al audio base (60 BPM)
$scope.baseBPM = 60; // BPM del audio original
$scope.metronomeAudio = document.getElementById('metronomeAudio');

// Función para convertir BPM a velocidad de reproducción
function bpmToPlaybackRate(bpm) {
  return bpm / $scope.baseBPM;
}

$scope.toggleMetronome = function() {
  $scope.metronomeActive = !$scope.metronomeActive;
  
  if ($scope.metronomeActive) {
    // Configurar velocidad inicial
    $scope.metronomeAudio.playbackRate = bpmToPlaybackRate($scope.metronomeBPM);
    $scope.metronomeAudio.currentTime = 0;
    $scope.metronomeAudio.play()
      .catch(e => console.error("Error al reproducir:", e));
  } else {
    $scope.metronomeAudio.pause();
    $scope.metronomeAudio.currentTime = 0;
  }
};

$scope.adjustBPM = function(change, event) {
  // Actualizar valor BPM
  $scope.metronomeBPM = Math.max(40, Math.min($scope.metronomeBPM + change, 240));
  
  // Ajustar velocidad de reproducción si está activo
  if ($scope.metronomeActive) {
    $scope.metronomeAudio.playbackRate = bpmToPlaybackRate($scope.metronomeBPM);
  }
  
  // Lógica para mantener presionado
  if (event) {
    const button = event.target;
    button.addEventListener('mouseup', clearBPMTimers);
    button.addEventListener('mouseleave', clearBPMTimers);
    button.addEventListener('touchend', clearBPMTimers);
    
    $scope.bpmTimeout = setTimeout(() => {
      $scope.bpmInterval = setInterval(() => {
        $scope.adjustBPM(change);
        $scope.$apply();
      }, 100);
    }, 500);
  } 
};

function clearBPMTimers() {
  clearTimeout($scope.bpmTimeout);
  clearInterval($scope.bpmInterval);
} 

$scope.openRecordings = function() {
    $scope.showSavedRecordingsModal = true;
};

$scope.closeSavedRecordingsModal = function() {
    $scope.showSavedRecordingsModal = false;
};



$scope.isRecording = false;
$scope.isProcessing = false;
$scope.showRecordingModal = false;
$scope.showSavedRecordingsModal = false;
$scope.recordings = [];
let recorder;
let model = new mm.OnsetsAndFrames('https://storage.googleapis.com/magentadata/js/checkpoints/transcription/onsets_frames_uni');

// Inicializar el modelo
model.initialize().then(() => {
    console.log('Modelo de transcripción cargado');
});

$scope.toggleRecording = function() {
    if ($scope.isRecording) {
        stopRecording();
    } else {
        startRecording();
    }
};

$scope.openRecordings = function() {
    $scope.showSavedRecordingsModal = true;
};

$scope.closeSavedRecordingsModal = function() {
    $scope.showSavedRecordingsModal = false;
};

$scope.playSavedRecording = function(recording) {
    $scope.currentRecording = recording;
    $scope.showRecordingModal = true;
    $timeout(() => {
        $scope.showSavedRecordingsModal = false;
        showRecording(recording);
    });
};

$scope.deleteRecording = function(id) {
    $scope.recordings = $scope.recordings.filter(r => r.id !== id);
};


let audioChunks = [];
function startRecording() {
    $scope.isRecording = true;
    navigator.mediaDevices.getUserMedia({ audio: true })
        .then(stream => {
            recorder = new MediaRecorder(stream);
            audioChunks = [];

            recorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    audioChunks.push(event.data);
                }
            };

            recorder.onstop = () => {
                $scope.isRecording = false;
                $scope.isProcessing = true;

                $scope.$apply();
                
                const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });



        const isAndroid = /Android/i.test(navigator.userAgent);
        if (isAndroid) {
            convertWebmToWav(audioBlob)
                .then(wavBlob => {
                    const formData = new FormData();
                    formData.append('file', wavBlob, 'recording.wav');
                    
                    return fetch('https://midiconverter-145083375828.us-central1.run.app/transcribe', {
                        method: 'POST',
                        body: formData
                    });
                })
                .then(async response => {
                    if (!response.ok) {
                        throw new Error(`Error del servidor: ${response.status}`);
                    }
                    
                    const midiBlob = await response.blob();
                    
                    if (!midiBlob.type.includes('midi') && !midiBlob.type.includes('octet-stream')) {
                        throw new Error('El servidor no devolvió un archivo MIDI válido');
                    }
                    
                    const newRecording = {
                        id: Date.now(),
                        name: "recording",
                        date: new Date(),
                        midiBlob: midiBlob,
                        processedLocally: false,
                        source: 'server'
                    };
                    
                    $scope.audios.unshift(newRecording);
                    $scope.showRecordingModal = true;
                    showRecording(newRecording);
                })
                .catch(err => {
                    console.error('Error en transcripción servidor:', err);
                    alert('Error al procesar la grabación en servidor');
                })
                .finally(() => {
                    $scope.isProcessing = false;
                    $scope.$apply();
                });
        }else{
                model.transcribeFromAudioFile(audioBlob).then(noteSequence => {
                    var newRecording = {
                        id: Date.now(),
                        data: noteSequence,
                      name: "recording",
                        date: new Date(),
                        midiBlob: null
                    };
                    
                    // Convertir a MIDI y guardar
                    const midiData = mm.sequenceProtoToMidi(noteSequence);
                    newRecording.midiBlob = new Blob([midiData], { type: 'audio/midi' });
                    
                    $scope.audios.unshift(newRecording);
                                  $scope.showRecordingModal = true;
                    showRecording(newRecording);
                }).catch(err => {
                    console.error('Error en la transcripción:', err);
                    alert('Error al procesar la grabación');
                }).finally(() => {
                    $scope.isProcessing = false;
                    $scope.$apply();
                });
            }



            };

            recorder.start();
        })
        .catch(err => {
            console.error('Error al acceder al micrófono:', err);
            $scope.isRecording = false;
            $scope.$apply();
        });
}

function stopRecording() {
    if (recorder && recorder.state === "recording") {
        recorder.stop();
        // Detener todas las pistas del stream
        recorder.stream.getTracks().forEach(track => track.stop());
    }
}

function showRecording(recording) {
    $timeout(() => {
        try {
            let url;
            if (recording.url) {
                // Es un link directo a un archivo .mid
                url = recording.url;
            } else if (recording.midiBlob) {
                // Es un blob generado localmente
                url = URL.createObjectURL(recording.midiBlob);
            } else {
                console.error("No hay MIDI válido en la grabación");
                return;
            }

            const visualizer = document.getElementById('recordingVisualizer');
            const player = document.getElementById('recordingPlayer');

            if (player && visualizer) {
                player.src = url;
                visualizer.src = url;

                if (player.player) {
                    player.player.stop();
                    player.player.loadMIDI(url);
                }
            }
        } catch (err) {
            console.error('Error al mostrar grabación:', err);
        }
    });
}


$scope.closeRecordingModal = function() {
    $scope.showRecordingModal = false;
    // Limpiar variables para nueva grabación
    audioChunks = [];
    $scope.currentRecording = null;
};


function convertWebmToWav(webmBlob) {
    return new Promise((resolve, reject) => {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const fileReader = new FileReader();
        
        fileReader.onload = function() {
            audioContext.decodeAudioData(this.result)
                .then(audioBuffer => resolve(audioBufferToWav(audioBuffer)))
                .catch(reject);
        };
        
        fileReader.onerror = reject;
        fileReader.readAsArrayBuffer(webmBlob);
    });
}

function audioBufferToWav(buffer) {
    const numChannels = buffer.numberOfChannels;
    const length = buffer.length * numChannels * 2 + 44;
    const bufferArray = new ArrayBuffer(length);
    const view = new DataView(bufferArray);
    
    // Escribir encabezado WAV
    writeString(view, 0, 'RIFF');
    view.setUint32(4, 36 + buffer.length * numChannels * 2, true);
    writeString(view, 8, 'WAVE');
    writeString(view, 12, 'fmt ');
    view.setUint32(16, 16, true);
    view.setUint16(20, 1, true);
    view.setUint16(22, numChannels, true);
    view.setUint32(24, buffer.sampleRate, true);
    view.setUint32(28, buffer.sampleRate * 2 * numChannels, true);
    view.setUint16(32, numChannels * 2, true);
    view.setUint16(34, 16, true);
    writeString(view, 36, 'data');
    view.setUint32(40, buffer.length * numChannels * 2, true);
    
    // Escribir datos de audio
    let offset = 44;
    for (let i = 0; i < buffer.numberOfChannels; i++) {
        const channel = buffer.getChannelData(i);
        for (let j = 0; j < channel.length; j++) {
            const sample = Math.max(-1, Math.min(1, channel[j]));
            view.setInt16(offset, sample < 0 ? sample * 0x8000 : sample * 0x7FFF, true);
            offset += 2;
        }
    }
    
    return new Blob([view], { type: 'audio/wav' });
}

function writeString(view, offset, string) {
    for (let i = 0; i < string.length; i++) {
        view.setUint8(offset + i, string.charCodeAt(i));
    }
}




// Modifica tu función closePlayer para guardar el progreso
$scope.closePlayer = function() {
    clearInterval($scope.sessionTimer.interval);
    
    // Guardar tiempo de sesión
    const sessionTime = $scope.sessionTimer.seconds;

        $scope.currentManual.practiceData = $scope.currentManual.practiceData || {
            totalTime: 0,
            completedBars: 0,
            sessions: []
        };
        
        $scope.currentManual.practiceData.totalTime += sessionTime;
        
        $scope.currentManual.practiceData.sessions.push({
            date: new Date().toISOString(),
            sessionTime: sessionTime,
            barsCompleted: 0 // Se actualizará cuando el usuario cierre el modal de progreso
        });
        
        // Mostrar modal para registrar compases avanzados
        $scope.showProgressModal = true;
      $scope.showPlayer = false;
   
};
  
   
}])
  
.controller('levelP', ["$scope", "$window", "SharedState", function($scope, $window, SharedState) {
    $scope.loading = true;
  
  
    SharedState.getNum().then(function(data) {
      $scope.name = data.name.split(" ")[0];
    $scope.lsn = data.stage.lsn;
      $scope.lvl = data.stage.lvl;
      $scope.status = data.status;
      $scope.loading = false;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}

 function isMobileDevice() {
  return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
}

$scope.toggle_pdf_modal = function(act){
  SharedState.getActivity().setCurrentActivity(act);
          //$("#drive").attr('src', act.url);        
        document.getElementById('modalPDF').classList.add('four');
}



$scope.toggle_video_modal = function(act) {
  var activity = act.content
  SharedState.getActivity().setCurrentActivity(activity);
        $("body").addClass("show-video-modal");
   let slidesHtml = '';
  activity.forEach((item, index) => {
    if (item.sort === 'intro') {
        slidesHtml += `
            <section class="slide">
                <h4>${item.lesson}</h4>
                <p>Desliza la pantalla o da click en los botones para navegar entre páginas.</p>
                <div class="iconWrap">
                <div class="icon"> 
                    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" fill="#fff">
                        <path d="M71.35,4.5H28.65C23.86,4.5,20,8,20,12.35V72.84c0,4.31,3.91,7.85,8.7,7.85h6.47a20.93,20.93,0,0,1-2.86-8.48c-.07-.7-.16-1.37-.26-2H26.09a1.71,1.71,0,0,1-1.79-1.62V12.69a1.71,1.71,0,0,1,1.79-1.61H73.91a1.71,1.71,0,0,1,1.79,1.61V68.57a1.71,1.71,0,0,1-1.79,1.62h-3c0,1.35-.15,2.87-.31,4.58a13.55,13.55,0,0,1-1.15,4.33,16,16,0,0,1-.83,1.59h2.73c4.79,0,8.7-3.54,8.7-7.85V12.35C80.05,8,76.14,4.5,71.35,4.5ZM54.26,8.36H45.11V7.3h9.15Z"/>
                        <path id="hand" d="M69.31,74.77c.15-1.59.24-3,.29-4.29.21-5.35-.39-8-1.53-8.75a2.07,2.07,0,0,0-1.23-.38,4.33,4.33,0,0,0-2.38.95s.92-5.51-3.85-5.95c-2,.15-2.78,1-3.11,1.77a2.74,2.74,0,0,0-.21.71,3.06,3.06,0,0,1,0,.39,2.26,2.26,0,0,1,0-.39c0-1.21-.19-4.8-4-4.8l-.7,0a2.62,2.62,0,0,0-2.5,1.71,16.13,16.13,0,0,0-.85,3.08,6.13,6.13,0,0,1-1.4-4.29l-.1-16.43a2.3,2.3,0,0,0-.2-.94,3.16,3.16,0,0,0-2.67-1.76c-.94,0-2,.56-2.75,2.19C40.9,43.76,41,67.49,41,67.49s-2.85-.19-4-7a6.63,6.63,0,0,0-2.85-4.38A4.42,4.42,0,0,0,32,55.17c-.57,0-1,.32-1.38,1.11a2.33,2.33,0,0,0-.11.28c-.81,2.18,1.54,6.6,2.61,13.92.09.61.17,1.24.24,1.9a19.6,19.6,0,0,0,2.68,7.94,19.24,19.24,0,0,0,1.24,1.85C40,85.78,39.79,89,40.35,95.5l21.79-.06s-.88-2.35,2.79-10.56A25.78,25.78,0,0,1,67.07,81l.38-.63a14,14,0,0,0,.79-1.48A13,13,0,0,0,69.31,74.77Z" />
                    </svg>
                    <p>Desliza</p>
                     </div>
                     <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100">
                        <g stroke-linejoin="round" stroke-linecap="round" stroke="white" stroke-width="5" fill="none">
                            <circle r="40" cx="50" cy="50" />
                            <polyline id="caret" points="30 60, 50 35, 70 60" ></polyline>
                        </g>
                    </svg>
                    <p>Botones de navegación</p>
                </div>
                </div>
            </section>
        `;
    } else if (item.sort === 'end') {
        slidesHtml += `
            <section class="slide">
                <img src="https://lh3.googleusercontent.com/d/1Hv9WGtVuOhTwTcolJyMO7IIlZjjydQsU"  width="360">
                <h3 style="margin-top: -10px">Actividad completada</h3>
                <p>${item.desc}</p>
            </section>
        `; 
    } else if (item.sort === 'imgTxt') {
        slidesHtml += `
            <section class="slide">
                <img  src="${item.img}"  style="border-radius: 7px !important; width: 90%; max-width: 500px">
                <h4>${item.desc1}</h4>
                <p>${item.desc2}</p>
            </section>
        `; 
    } else if (item.sort === 'img') {
        slidesHtml += `
            <section class="slide">
                <img  src="${item.img}"   style="width: 90%; max-width: 500px">
                <p>${item.desc}</p>
            </section>
        `; 
    } else if (item.sort === 'youtube') {
        slidesHtml += `
            <section class="slide" >
                <iframe id="youtube" frameborder="0" src="${item.url}"></iframe>
                <p style="position: absolute; top: 20px;">${item.desc}</p>
            </section>  
        `;
    } else if (item.sort === 'video') {
       const controlsAttr = isMobileDevice() ? 'controls' : '';
        slidesHtml += `
            <section class="slide">
            
                    <video class="videoslider" id="videoPlayer${index}" controls>
                        <source src="${item.url}" type="video/mp4">
                    </video>
              
     
                </section>
        `;
    }
  });

  // Inyectar el contenido de slides en el contenedor #panelWrap
  $("#panelWrap").html(slidesHtml);

  
 

//const colorArray = ["#426F42", "#262626", "#36648B", "#683A5E", "#000000", "#36648B"];
  const colorArray = act.colors
const slides = document.querySelectorAll(".slide");
const container = document.querySelector("#panelWrap");
let dots = document.querySelector(".dots");
dots.innerHTML = "";
let oldSlide = 0;
let activeSlide = 0;
let navDots = [];
let dur = 0.6;
let offsets = [];
let toolTipAnims = [];
let ih = window.innerHeight;
const mouseAnim = gsap.timeline({repeat:-1, repeatDelay:1});
const handAnim = gsap.timeline({repeat:-1, repeatDelay:1});
const cursorAnim = gsap.timeline({repeat:-1, repeatDelay:1});
const arrowAnim = gsap.timeline({repeat:-1, repeatDelay:1});
document.querySelector("#upArrow").addEventListener("click", slideAnim);
document.querySelector("#downArrow").addEventListener("click", slideAnim);

// create nev dots and add tooltip listeners
for (let i = 0; i < slides.length; i++) {
let tl = gsap.timeline({paused:true, reversed:true});
  gsap.set(slides[i], { backgroundColor: colorArray[i] });
  let newDot = document.createElement("div");
  newDot.className = "dot";
  newDot.index = i;
  navDots.push(newDot);
  newDot.addEventListener("click", slideAnim);
  dots.appendChild(newDot);
  offsets.push(-slides[i].offsetTop);
}

// icon animations for slide 1
mouseAnim.fromTo("#mouseRings circle", {attr:{r:12}}, {duration: 0.8, stagger: 0.25, attr:{r:40}});
mouseAnim.fromTo("#mouseRings circle", {opacity:0}, {duration: 0.4, stagger: 0.25, opacity:1}, 0);
mouseAnim.fromTo("#mouseRings circle", {opacity:1}, {duration: 0.4, stagger:0.25, opacity:0}, 0.4);

handAnim.to("#hand", {duration: 0.75, y:16, rotation:5, transformOrigin:"right bottom"});
handAnim.to("#hand", {duration: 0.5, y:-15, ease:"power3.inOut"});
handAnim.to("#hand", {duration: 1, y:0, rotation:0});



arrowAnim.to("#caret", {duration: 0.5, attr:{points:"30 40, 50 65, 70 40"}, repeat:3, yoyo:true, ease:"power2.inOut", repeatDelay:0.25});

// get elements positioned
gsap.set(".dots", {yPercent:-50});
  
// side screen animation with nav dots
const dotAnim = gsap.timeline({paused:true});
dotAnim.to(
  ".dot",
  {
    stagger: { each: 1, yoyo: true, repeat: 1 },
    scale: 2.1,
    rotation: 0.1,
    ease: "none"
  },
  0.5
);
dotAnim.time(1);


// figure out which of the 4 nav controls called the function
  function slideAnim(e) {

  oldSlide = activeSlide;
  // dragging the panels
  if (this.id === "dragger") {
    //activeSlide = offsets.indexOf(this.endY);
    let deltaX = Math.abs(Math.abs(this.startY)-Math.abs(this.endY))
        let direction = Math.sign(this.startY-this.endY) // '-' => right, '+' => left
        let movement = deltaX > ih*.2
        movement && (activeSlide += direction)
        gsap.to(container, dur, { y: offsets[activeSlide], onUpdate: tweenDot });
  } else {
    if (gsap.isTweening(container)) {
      return;
    }
    // up/down arrow clicks
    if (this.id === "downArrow" || this.id === "upArrow") {
      activeSlide = this.id === "downArrow" ? (activeSlide += 1) : (activeSlide -= 1);
      // click on a dot
    } else if (this.className === "dot") {
      activeSlide = this.index;
      // scrollwheel
    } else {
      activeSlide = e.deltaY > 0 ? (activeSlide += 1) : (activeSlide -= 1);
    }
  }
  // make sure we're not past the end or beginning slide
  activeSlide = activeSlide < 0 ? 0 : activeSlide;
  activeSlide = activeSlide > slides.length - 1 ? slides.length - 1 : activeSlide;
  if (oldSlide === activeSlide) {
    return;
  }
  // if we're dragging we don't animate the container
  if (this.id != "dragger") {
    gsap.to(container, dur, { y: offsets[activeSlide], ease:"power2.inOut", onUpdate:tweenDot });
  }
}

gsap.set(".hideMe", {opacity:1});
window.addEventListener("resize", newSize);

// make the container a draggable element
  let dragMe = Draggable.create(container, {
  type: "y",
  edgeResistance: 1,
  onDragEnd: slideAnim,
  onDrag: tweenDot,
  onThrowUpdate: tweenDot,
  snap: offsets,

  zIndexBoost: false,
  allowNativeTouchScrolling: false,
  bounds: "#masterWrap"
});

dragMe[0].id = "dragger";
newSize();

// resize all panels and refigure draggable snap array
function newSize() {
  offsets = [];
  ih = window.innerHeight;
  gsap.set("#panelWrap", { height: slides.length * ih });
  gsap.set(slides, { height: ih });
  for (let i = 0; i < slides.length; i++) {
    offsets.push(-slides[i].offsetTop);
  }
  gsap.set(container, { y: offsets[activeSlide] });
  dragMe[0].vars.snap = offsets;
}

// tween the dot animation as the draggable moves
  function tweenDot() {
    gsap.set(dotAnim, {
    time: Math.abs(gsap.getProperty(container, "y") / ih) + 1
  });
}

}

   $scope.goTo = function(url) {
  $window.open(url, '_blank');
}; 


  $scope.allData = [
     {
          block: "Unit 1",
          lessons: [{
              name: 'Lesson 1: Introduction',
              id: 1,
              material:[
                {
                title: 'Elementos de la música',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lesson',
                  media: 'video',
                  colors: ["#426F42", "#36648B", "#c4302b", "#36648B", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: '1.1 Introducción'
                    },
                   {
                      sort: 'imgTxt',
                      desc1: '¿Que es la música?' ,
                      desc2: 'La música es un lenguaje, es el arte de combinar sonidos, melodías y ritmos para crear expresiones artísticas y emocionales',
                      img: 'https://margaritoestudio.com/wp-content/uploads/2021/05/Margarito-Sonido2.jpg'
                    }, 
                    {
                      sort: 'youtube',
                       desc: 'Completa la actividad' ,
                      url: 'https://app.mozartacademy.mx/imgNote',
                    },
                    {
                      sort: 'video',
                      url: 'https://dashboard.mozartacademy.mx/media/Chopin-4.mp4',
                    },
                    
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'piano',
                  type: 'Exercises',
                  media: 'pdf',
                  index: 1,
                 url: 'https://drive.google.com/file/d/1FI1eaRN-JowdgRRFEF_peZktBd-VY3Ke/preview'
               
                  },
                          {
                            title: 'Ritmo y métrica',
                  icon: 'bolt',
                  type: 'Quiz',
                  media: 'quiz',
                  package: 1
                  }
                ]
              },
              {
                title: 'Ritmo',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lesson',
                  media: 'video',
                  colors: ["#426F42", "#c4302b", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: '1.1 Ritmo'
                    },
                  
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/Q4r5gnfAtzs',
                    },
                    
                    
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  }
                ]
              },
              {
                title: 'Melodía',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lesson',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: '1.2 Melodía'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/3wn33KNLy5M',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1WqVnSwujAS7Rps02XNfqueu7PtiNVG7D/preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1s5bZw8XCq5cHPcDgOniZSqwpmc6xcKYG/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Ode to Joy - var 1',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  colors: ["#262626"],
                  content: 
                  [
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/bVWXlV8Neic',
                    },                   
                  ]
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1frOQ8O1QNfFf8GUKFYH2-lEYvWhSG6RS/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 2: Pre Staff',
              id: 2,
              material:[
              {
                title: 'Posición de Do',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#36648B", "#683A5E", "#36648B", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: '2.1 Posición de Do'
                    },
                   /* {
                      sort: 'catIntro',
                      greet1: '¡Hola ',
                      greet2: '!, soy Mozart el gato' ,
                      desc2: 'Seré tu profesor y en esta lección vamos a definir puntos importantes sobre la dinámica de trabajo en la plataforma',
                      img: 'https://lh3.googleusercontent.com/d/1smys9TBeetNUVB7fJlTxrf6AJl73mpS5'
                    }, */
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/Q4r5gnfAtzs',
                    },
                    
                     {
                      sort: 'video',
                      url: 'https://www.mozart.studio/videos/Chopin-2.mp4',
                    },
                     {
                      sort: 'video',
                      url: 'https://www.mozart.studio/videos/Chopin-2.mp4',
                    },
                  /*  {
                      sort: 'img',
                      desc: 'Diagrama de ritmos',
                      img: 'https://lh3.googleusercontent.com/d/1zhg--goushq7wK1IHdit5baxaojuK3Pr'
                    }, */
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1HKC6x6ca-whFRxlYAUKOQo7M-dpR8dtY/preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Ys_fybQsMIjS4zaCRLO9lV8qsvmvooXq/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Ode to Joy - var 3',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/ec4ZRGMYgrY'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://app.mozartacademy.mx/pdfView3'
                  }
                ]
              }
            ]
          },

          {
              name: 'Lesson 3: The Grand Staff',
              id: 3,
              material:[{
                title: 'Intervalos de 2da y 3era',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Intervalos de 2da y 2era'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/H4x0TPlSoaQ',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Wu2qa7B3hyVoOHkPWdVcDHklBgn5nk0T/preview'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Dom_0ZjNoslBKZpUa3IUDN8XMzcxZ1Jd/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Mountain Climbing',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/XfUF1yv0Ook'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1jo4LcVuPV-Q0eytfVFyDdCPqbTDX1aU9/preview'
                  }
                ] 
              }
            ]
          },

          {
              name: 'Lesson 4: Intervals',
              id: 4,
              material:[{
                title: 'Intervalos de 4ta y 5ta',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Intervalos de 4ta y 5ta'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/M6DCHr2wVh8',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/178foCLFrPUNg1Tr536m0oBNLU3JY87JY/preview'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1G3Cun9yL_xl8ZJUhDJE5CAYTXMQUCIZY/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Jingle Bells',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/JCogx6-fQ0Q'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/19_81QSEylsakl04ZEnFXHKTDThcnI3MC/preview'
                  }
                ]
              }
            ]
          }

        ]
      },


//BLOQUE 2
     {
          block: "Unit 2",
          lessons: [
            {
              name: 'Lesson 5: Intervals II',
              id: 5,
              material:[{
                title: 'Construcción de frases',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Construcción de frases'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/RJnwVQHexW0',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1V15F3hT0JQYYBP90XIMT2lHogik6s2Kj/preview'
                  },

                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1gum-qE-LUdxxRNmjh39A1xImbqYRABAX/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Run Away River',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/kl_V1GltXDc'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1pHinigt3CUDZeBMYowtaHHP_yGjRigWo/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 6: Phrases',
              id: 6,
              material:[{
                title: 'Construcción de acordes',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Construcción de acordes'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/Y2MokfVUSqs',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1zhyiUNAagb5l-Z8pkWSrDt5EOtUGCf0h/preview'
                  }
                ]
              },
              {
                title: 'Acorde C y G7',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Acorde C y G7'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/n7qaCP5a-Pc',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/14g5yaRgRo66fJtigaCVpN7zcZ6AusP05/preview'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1UtQsQYtjkYxqbVnCGfTmNa85xtnhG3W7/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Trumpet Voluntary',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/k7ZlQezPHPk'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1-b7JbEAe5M5j_3KoSOCIs8Ss5uzez2Rw/preview'
                  }
                ]
              }
            ]
          },
              {
              name: 'Lección 7: Chords',
              id: 7,
              material:[{
                title: 'Definición',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Corcheas',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Corcheas y Staccato'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/LJIBynkI1Cs',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                   {
                  icon: 'smart_display',
                  type: 'Staccato',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/5zX6CFXf6cQ'
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1rEgkVVzKMuvyvXJATJ9mUdkm_oWy5lQW/preview'
                  }
                 
                ]
              },
              {
                title: 'Ejercicios',
                icon: 'library_books',
                activity:[
                 /*{
                  icon: 'smart_display',
                  type: 'Explicación adicional',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1DquyL0GuDR3zojHcmzBLPZaA598DMLbu/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Old German Dance',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/2R4VsyAvL60'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1ZR5HKyTC22IR0kr8hFLLZl2eX9I6KJPO/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 8: Quavers and Staccato',
              id: 8,
              material:[{
                title: 'Transposición',
                icon: 'library_books',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1i7yEW2-HS26JozRu_YWd0pm-mneAgk5V/preview'
                  }
                 
                ]
              },
              {
                title: 'Pieza: Allegretto',
                icon: 'audio_file',
                activity:[/*{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/15bxfUEOjjddNaqp7ztMJPxSX10dYOiWw/preview'
                  }
                ]
              }
            ]
          }

        ]
      },

//BLOQUE 3
       {
          block: "Unit 3",
          lessons: [
            {
              name: 'Lesson 9: C Position II',
              id: 9,
              material:[{
                title: 'Posición de Do II',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Posición de Do II'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/KopYT505jHA',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1uuu7dX6SRoOIi1aqzTEJ1xj8CbfW6Uft/preview'
                  }
                ]
              },
              {
                title: 'Marcas de Tempo y Dinámicas',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                   colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Marcas de Tempo y Dinámicas'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/fOHFGsq-cGw',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                          {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1cyGlwmsc3PMV3ECaA6J57LMw7f-Oxw6C/preview'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1lLMYCMDiL40krhqNKmG6rRtg3elF_ZKE/preview'
                  }                   
                ]
              },
              {
                title: 'Pieza: Little Playmates',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/FivvBFEW1a0'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/16DBduII3mLFYdSytK-0DA0kg8jWA_KtO/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 10: C Major Scale',
              id: 10,
              material:[{
                title: 'Definición y ejercicios',
                icon: 'library_books',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1VhR-5CT2GwbonlTQW12gwiVo1_bp2h4d/preview'
                  }
                ]
              },

              {
                title: 'Pieza: Fish Scales',
                icon: 'audio_file',
                activity:[/*{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Iw8_UXSYqCTWT0c4ORTZst1ak3PCtfCs/preview'
                  }
                ]
              }
            ]
          },

           {
              name: 'Lesson 11: G Position',
              id: 11,
              material:[{
                title: 'Definición y ejercicios',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Posición de Sol'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/jGM_qOcewYg',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1qf6vWHGkllTXZ4OYmQNGy2_Bjrqvs_Jr/preview'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1CfqcsxDsyCwxo8ZhhOrejiiJcgyEzxCE/preview'
                  }
                 
                ]
              },
              {
                title: 'Pieza: Bagpipe',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/il7CTAteqhE'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/16hYD36HcMS-WRqzR9pBvSLHCxifOTkWc/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 12: The Tie',
              id: 12,
              material:[{
                title: 'Definición y ejercicios',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  colors: ["#426F42", "#262626", "#000000"],
                  content: 
                  [
                    {
                      sort: 'intro',
                      lesson: 'Ligadura de prolongación'
                    },
                    {
                      sort: 'youtube',
                      url: 'https://www.youtube.com/embed/edjG-czdX2Y',
                    },
                   
                    {
                      sort: 'end',
                      desc: 'Has completado todos los pasos de esta lección. Pulsa la X para salir y avanzar con la siguiente actividad.'
                    }
                  ]
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/16dc7Bkc7KtoP95hA1Tcni_i4M7eDfNLf/preview'
                  }                 
                ]
              },
              {
                title: 'Pieza: Sonatina',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/09dONQwMtv8'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/14f3fDZf4Fj13zYgXwNSDPIerGGIG_GtS/preview'
                  }
                ]
              }
            ]
          }

        ]
      }     
]
  
  
  }])

.controller('level1', ["$scope", "SharedState", function($scope, SharedState) {
     SharedState.getNum().then(function(data) {
    $scope.lsn = data.stage.lsn;
      $scope.lvl = data.stage.lvl;
      $scope.status = data.status;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}
   $scope.allData = [
     {
          block: "Unit 1",
          lessons: [
            {
              name: 'Lesson 1: G Major Scale',
              id: 1,
              material:[{
                title: 'Solfeo I',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/sn9AnIwXWNw'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1rnUC_AB2buvh-BLf16L6SOte4ct2y4bx/preview'
                  }
                ]
              },
              {
                title: 'Posición de Sol (parte 2)',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/gtkAYv5wBoA'
                  },{
                  icon: 'description',
                  type: 'Ejercicio',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1DRf5RdEG7C7KAVxv4wy593dfN8Cbeqat/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Minuet, Gurlitt',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/ZHuYXBK1IM4'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1-Gh5AJBcEaO1eVJ-SeV6-kTmlaPK5muP/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 2: The Key of G Major',
              id: 2,
              material:[
              {
                title: 'Solfeo II',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/-G5yINx85k0'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1upeZQGqvk9PFCBiyIVeONZK0E0P5f01l/preview'
                  }
                ]
              },
              {
                title: 'Posición combinada',
                icon: 'library_books',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicio',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1zU6zcWwIxgzR4iy0yL8N651kcarf2X9u/preview'
                  },{
                  icon: 'description',
                  type: 'Marcha',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1gPwPtcEmfF-zBLaQLJBKwQOWYJTX_6cf/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Minuet, Reinagle',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/Riv3gEBBG9I'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1_v-xICqupk8KUO32-PwZKURNhRtXRjh6/preview'
                  }
                ]
              }
            ] 
          },

          {
              name: 'Lesson 3: Major Pentascales',
              id: 3,
              material:[{
                title: 'Solfeo III',
                icon: 'music_note',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                    code: 's',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/10LdRbiKINHgPs3QgcZf_9Ts2WsCzvw3p/preview'
                  }
                ]
              },
              {
                title: 'Alteraciones',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'El sostenido',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/0tyWeauOFzQ'
                  },{
                  icon: 'auto_stories',
                  type: 'Ejercicio',
                    code: 'lA',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1azmdnqr2BWqj3NiWWCg-Fl0-DBcDA6II/preview'
                  }
                ]
              },
              {
                title: 'La armadura',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/6iR3f8m8COM'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1kr9ChyBTuFpBXg_obh62-AG3q_MRfb5q/preview'
                  },{
                  icon: 'description',
                  type: 'Marcha II',
                    code: 'lB',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1gPwPtcEmfF-zBLaQLJBKwQOWYJTX_6cf/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Promenade',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/aOFeOBDlWDA'
                  },{
                  icon: 'description',
                  type: 'Partitura', 
                    code: 'p',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/140Aklx2WntuhqRCxChRcpKDs06soKJfA/preview'
                  }
                ]
              }
             
            ]
          },

         

        ] 
      },
   
   //BLOQUE 2
    {
          block: "Unit 2",
          lessons: [
            {
              name: 'Lesson 4: Change of position',
              id: 4,
              material:[{
                title: 'Solfeo IV',
                icon: 'music_note',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1nbWUe2RCjSORXae8hCxr5U-bqy9PuOtc/preview'
                  }
                ]
              },
              {
                title: 'Definición',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/oBRoDA-GkBQ'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1K_lWzEDpurCRuhJiYdCZ1rPliCSURyFe/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Dance',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/CcQlCKt1MgM'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1HT2Ih91glXfWEC0A6uM4KSXZc_whfsku/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 5: Intervals of 6ths',
              id: 5,
              material:[
              {
                title: 'Solfeo V',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1aqzF5rbWmzVnnOlqOjsjwLmzZGU1VpUY/preview'
                  }
                ]
              },
              {
                title: 'Intervalos de 6ta',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/SEAdyQ0Zw3M'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/18uL7_4_fhiE1n8zYyLrW_xZhCsSpYzTE/preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1N8HAVRAWFxKlmniv5Bd0jIGPl9GmD38k/preview'
                  }
                ]
              },
              {
                title: 'DC al Fine',
                icon: 'library_books',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1G8EbF6t3wgrdSgpZVAmTv6OFhI31m8XW/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Sonatina, Gurlitt',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/n-CJ6AP83zs'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1F7mj27XUDWz6-8R6adN6f6vLUnJAEOio/preview'
                  }
                ]
              }
            ]
          },

          {
              name: 'Lesson 6: The Key of F Major',
              id: 6,
              material:[{
                title: 'Solfeo VI',
                icon: 'music_note',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/144ZOFA87KNajpViMk4T53YnSzMhWGZQy/preview'
                  }
                ]
              },
              {
                title: 'El bemol',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Bemol',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/aLNz-5bsWb8'
                  },
                  {
                  icon: 'auto_stories',
                  type: 'El Bemol',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1_UXn8vUzyImBDGlY_Q9RFZOT703Nfngq/preview'
                  }
                ]
              },
              {
                title: 'Posición de Fa',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/c1WwjyH2h3A'
                  },/*{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  },*/
                  {
                  icon: 'description',
                  type: 'Marcha en Fa',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1pf-AuPRZDOYyu5Bjk10Gqf0KH4G2y7i8/preview'
                  }
                ]
              },
              {
                title: 'Pieza: The Old Windmill',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/P64xNcu4v-w'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Yf667gGJI9QBfA0xMqvAiiyKUhF-HvaZ/preview'
                  }
                ]
              }
            ]
          }
        ]
      },

   //BLOQUE 3

{
          block: "Unit 3",
          lessons: [
            {
              name: 'Lesson 7: Keys of C, G y F',
              id: 7,
              material:[
              {
                title: 'Escalas C, G y F',
                icon: 'library_books',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1unPI5MyC-yxZCXlaUDM375iHb9DbaOyN/preview'
                  }
                ]
              },
              {
                title: 'Pieza: First Etude',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/2OEzXuEbsA0'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1V1Ofj99nBsVR99fJ8m2oWcuTDx33sJtz/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 8: Harmonic Thirds',
              id: 8,
              material:[
              {
                title: '8va y Natural',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/blGuL_tXviE'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1ZKfYtbA2LJmQOvZLpqJrfaZiLwyqKq7I/preview'
                  }
                ]
              },
              /*{
                id: 52,
                title: 'Cambio de clave, RH LH y Fermatta',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              },*/
              {
                title: 'Pieza: Jinx',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/Z9QbuWRh7Bc'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1VjDu6n4rO1HkIGWnnfh_0D7VRC9KWUW0/preview'
                  }
                ]
              }
            ]
          },

          {
              name: 'Lesson 9: Syncopation',
              id: 9,
              material:[{
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/drI00sPPRks'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Go9CgkCirvErqeLn8QC1lF2tK69eZdSx/preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/14Aji9kUWssBCcBKU_zSCRkuK3sBwEVf7/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Minuet and Trío',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/jdCm8wj-h0w'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1W41ayDydPUrKU57OMHEfMl1BuzNYkk01/preview'
                  }
                ]
              }
            ]
          },

        ]
      },
   
   
   
 {
          block: "Final Piece",
          lessons: [
            {
              name: 'Elección de Pieza Final',
              id: 10,
              material:[{
                title: 'Lista A',
                icon: 'library_music',
                activity:[{
                  icon: 'video_library',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/playlist?list=PLFLLmJ16LJSyilSL5i2UoEEiHaioZTVaW'
                  }
                ]
                },{
                title: 'Lista B',
                icon: 'library_music',
                activity:[{
                  icon: 'video_library',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/playlist?list=PLFLLmJ16LJSy1cuiGt1xCqne4nQasdXMw'
                  }
                ]
                },
              ]
          }
        ]

  }
   
   ]
    
}])


 
.controller('level2', ["$scope", "SharedState", function($scope, SharedState) {
    SharedState.getNum().then(function(data) {
    $scope.lsn = data.lsn;
      $scope.lvl = data.lvl;
      $scope.progress = data.progress;
      $scope.counter = data.counterLvl[2]
      $scope.status = data.status;
      $scope.currentlsns = filterCurrent(data.lssons);
       $scope.history = data.history;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}
   $scope.allData = [
     {
          block: "Unit 1",
          lessons: [
            {
              name: 'Lesson 1: Change of Position II',
              id: 1,
              material:[{
                title: 'Solfeo VII',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/V_qtDfHCdZw'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1jztdXACdUwHJZMOcsHjY4xLjsRiM7KLS/preview'
                  }
                ]
              },
              {
                title: 'Cambio de posición II',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Definición',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/WvgG1n8njqw'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1LCg9EBt1tBT4UUmH48xC_XTu64fPBKhu/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Allemande',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/BS1YWNFT98o'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1ArvTOodKca-OExVvFaQnMYw3aj71mizc/preview'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 2: Counterpoint',
              id: 2,
              material:[
              {
                title: 'Solfeo VIII',
                icon: 'music_note',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1pzrUzz5p6mDfLPsaguhiNCJ_9hIf0M5D/preview'
                  }
                ]
              },
              {
                title: 'Definición',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/SWEK7J_8_Mw'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/14SKHXbiMeQ4AYWk9QtF3wIp3E0qPdPEa/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Andante, Beyer',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/fLfVLRUuH_0'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1_HyfX-I55m7Rhwas2sOvY1SwGRCST4JH/preview'
                  }
                ]
              }
            ] 
          },

          {
              name: 'Lesson 3: Intervals of 7ths y 8ves',
              id: 3,
              material:[{
                title: 'Solfeo IX',
                icon: 'music_note',
                activity:[/*{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },*/{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1IICpRij9qfT1LC3SOgy2-hNhU3qducu3/preview'
                  }
                ]
              },
              {
                title: 'Intervalos de 8va y 7ma',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/cOFpHDlol2Y'
                  },{
                  icon: 'description',
                  type: 'Intervalos de 7ma y 8va',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1Al9fBtgZOAlyB4aGGAGwajwrWggzJ6qy/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Minuet, Leopold Mozart',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/OLtap24RWpg'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1wEngXDEnzxCH-nUdvqpyP9TJl2LT7Z0X/preview'
                  }
                ]
              }
             
            ]
          },

         

        ]
      },


//BLOQUE 2
       {
          block: "Unit 2",
          lessons: [
            {
              name: 'Lesson 4: Major Scales',
              id: 4,
              material:[{
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/v1e-4OnBlI0'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1KC_u0nOi-PjotEKLGuEAPDXiDEJvDUwA/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Aria in F',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/NIYHDXfB9UQ'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1WhaTn70R8qil68wjWdMAmLfa6Ij77dzC/preview'
                  }
                ]
              }
            ]
          },
           {
              name: 'Lesson 5: Minor Scales',
              id: 5,
              material:[
              {
                title: 'Definición y tipos de triadas',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/35sho6430Zo'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1ZsapPWehg_8NLCydckeLOCLDuCrioAFw/preview'
                  }
                ]
              },
              {
                title: 'Ejercicios con triadas mayores y menores',
                icon: 'library_books',
                activity:[{
                  icon: 'description',
                  type: 'Ejercicio',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1afrrOkeHBa_FPYagQsRgcpWEaBkwvVF7/preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1TwDvzf9bdN5jEYBWRgA9BbZbjDd7buev/preview'
                  }
                ]
              },
              {
                title: 'Pieza: Galope, Kabalevsky',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/FoSBgcMH6QQ'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d/1dosurupTiVPzuNpM29V2tn3HDcSd1BS2/preview'
                  }
                ]
              }
            ]
          },
            {
              name: 'Lesson 6: Major and Minor Triads',
              id: 6,
              material:[
              {
                title: 'Escalas',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Grupo 1',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  },{
                  icon: 'description',
                  type: 'Grupo 2',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              },
              {
                title: 'Pieza: Waltz, Kabalevsky',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              }
            ]
          },
         

        ]
      },


//BLOQUE 3
    {
          block: "Unit 3",
          lessons: [
             {
              name: 'Lesson 7: Triad Invertions',
              id: 7,
              material:[{
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  },{
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              },
              {
                title: 'Pieza: Melody, Kohler',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              }
            ]
          },
            {
              name: 'Lesson 8: Arpeggios',
              id: 8,
              material:[
              {
                title: 'Tresillos',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              },
              {
                title: 'Pieza: ',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              }
            ]
          },
            {
              name: 'Lesson 9: Compound Meters',
              id: 9,
              material:[
              {
                title: 'Definición',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },
                  {
                  icon: 'description',
                  type: 'Ejercicios',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              },
              {
                title: 'Pieza: Melody, Le Couppey',
                icon: 'audio_file',
                activity:[{
                  icon: 'piano',
                  type: 'Ejemplo',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'description',
                  type: 'Partitura',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
              }
            ]
          },

        ]
      },


 {
          block: "Final Piece",
          lessons: [
            {
              name: 'Elección de Pieza Final',
              id: 10,
              material:[{
                title: 'Lista A',
                icon: 'library_music',
                activity:[{
                  icon: 'video_library',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/playlist?list=PLFLLmJ16LJSyilSL5i2UoEEiHaioZTVaW'
                  }
                ]
                },{
                title: 'Lista B',
                icon: 'library_music',
                activity:[{
                  icon: 'video_library',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/playlist?list=PLFLLmJ16LJSy1cuiGt1xCqne4nQasdXMw'
                  }
                ]
                },
              ]
          }
        ]

  }
     
      
]

    
}])



.controller('level3', ["$scope", "SharedState", function($scope, SharedState) {
      SharedState.getNum().then(function(data) {
    $scope.lsn = data.stage.lsn;
      $scope.lvl = data.stage.lvl;
      $scope.status = data.status;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}
    $scope.allData = [
     {
          block: "Unit 1",
          lessons: [
            {
              name: 'Lesson 1: Intervals',
              material:[{
                id: 200,
                title: 'Solfeo I',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 2: Triads',
              material:[
              {
                id: 200,
                title: 'Solfeo II',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ] 
          },

          {
              name: 'Lesson 3: Seventh Chords',
              material:[{
                id: 200,
                title: 'Solfeo III',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
             
            ]
          } 

        ]
      },


//BLOQUE 2
    {
          block: "Unit 2",
          lessons: [
            {
              name: 'Lesson 4: Harmonic Field',
              material:[{
                id: 200,
                title: 'Solfeo IV',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lesson 5: Harmonic Progression',
              material:[
              {
                id: 200,
                title: 'Solfeo V',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              } 
            ]
          },

          {
              name: 'Lesson 6: Primary Chords',
              material:[{
                id: 200,
                title: 'Solfeo VI',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },

         

        ]
      },

//BLOQUE 3
      {
          block: "Bloque 3",
          lessons: [
            {
              name: 'Lesson 7: Cadences',
              material:[
              {
                id: 200,
                title: 'Escalas C, G y F',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },
          {
              name: 'Lesson 8: Melodic Organization',
              material:[
              {
                id: 200,
                title: '8va y Natural',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            
             
            ]
          },
          {
              name: 'Lesson 9: Arpeggios',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          }

        ]
      },

//Pieza Final
    

 {
          block: "Final Piece",
          lessons: [
            {
              name: 'Elección de Pieza Final',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
                },
              ]
          }
        ]

  }



]
     
}])




.controller('level4', ["$scope", "SharedState", function($scope, SharedState) {
      SharedState.getNum().then(function(data) {
    $scope.lsn = data.lsn;
      $scope.lvl = data.lvl;
      $scope.progress = data.progress;
      $scope.counter = data.counterLvl[4]
      $scope.status = data.status;
      $scope.currentlsns = filterCurrent(data.lssons);
       $scope.history = data.history;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}
    $scope.allData = [
     {
          block: "Bloque 1",
          lessons: [
            {
              name: 'Lección 1: Acordes de Séptima',
              material:[{
                id: 200,
                title: 'Solfeo I',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lección 2: Inversión de Séptimas',
              material:[
              {
                id: 200,
                title: 'Solfeo II',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ] 
          },

          {
              name: 'Lección 3: Cadencias',
              material:[{
                id: 200,
                title: 'Solfeo III',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
             
            ]
          } 

        ]
      },


//BLOQUE 2
    {
          block: "Bloque 2",
          lessons: [
            {
              name: 'Lección 4: Acompañamiento y Pedal',
              material:[{
                id: 200,
                title: 'Solfeo IV',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lección 5: Ornamentos',  //Mordente, trinos, apoyaturas
              material:[
              {
                id: 200,
                title: 'Solfeo V',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              } 
            ]
          },

          {
              name: 'Lección 6: Figuras Rítmicas',
              material:[{
                id: 200,
                title: 'Solfeo VI',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },

         

        ]
      },

//BLOQUE 3
      {
          block: "Bloque 3",
          lessons: [
            {
              name: 'Lección 7: Escalas modales',
              material:[
              {
                id: 200,
                title: 'Escalas C, G y F',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },
          {
              name: 'Lección 8: Escalas menores',
              material:[
              {
                id: 200,
                title: '8va y Natural',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            
             
            ]
          },
          {
              name: 'Lección 9: Grupo 2 (D, A, E)',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          }

        ]
      },

//Pieza Final
    

 {
          block: "Pieza Final",
          lessons: [
            {
              name: 'Elección de Pieza Final',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
                },
              ]
          }
        ]

  }



]
     
}])


.controller('level5', ["$scope", "SharedState", function($scope, SharedState) {
      SharedState.getNum().then(function(data) {
    $scope.lsn = data.lsn;
      $scope.lvl = data.lvl;
      $scope.progress = data.progress;
      $scope.counter = data.counterLvl[5]
      $scope.status = data.status;
      $scope.currentlsns = filterCurrent(data.lssons);
       $scope.history = data.history;
  })


  function filterCurrent(obj) {
    return obj.filter(function(entry) {
        return entry.index == $scope.lsn;
    });
}
  
  $scope.convertirFecha = function(fecha) {
  const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
  const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];

  const [dia, mes, año] = fecha.split('/').map(Number);
  const date = new Date(año, mes - 1, dia);
  const nombreDia = dias[date.getDay()];
  const nombreMes = meses[date.getMonth()];
  return `${nombreDia} ${dia} de ${nombreMes}`;
}
    $scope.allData = [
     {
          block: "Bloque 1",
          lessons: [
            {
              name: 'Lección 1: Progresión de Acordes II',
              material:[{
                id: 200,
                title: 'Solfeo I',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lección 2: Cadencias II',
              material:[
              {
                id: 200,
                title: 'Solfeo II',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ] 
          },

          {
              name: 'Lección 3: Lectura a Primer Vista',
              material:[{
                id: 200,
                title: 'Solfeo III',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
             
            ]
          } 

        ]
      },


//BLOQUE 2
    {
          block: "Bloque 2",
          lessons: [
            {
              name: 'Lección 4: Triadas Aug y Dim',
              material:[{
                id: 200,
                title: 'Solfeo IV',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          },
          {
              name: 'Lección 5: Modulaciones',  //Mordente, trinos, apoyaturas
              material:[
              {
                id: 200,
                title: 'Solfeo V',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              } 
            ]
          },

          {
              name: 'Lección 6: Sustituciones',
              material:[{
                id: 200,
                title: 'Solfeo VI',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Descripción',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },

         

        ]
      },

//BLOQUE 3
      {
          block: "Bloque 3",
          lessons: [
            {
              name: 'Lección 7: Sus2 y Sus4',
              material:[
              {
                id: 200,
                title: 'Escalas C, G y F',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
              
            ]
          },
          {
              name: 'Lección 8: Grupo 3 (Bb, Eb, Ab)',
              material:[
              {
                id: 200,
                title: '8va y Natural',
                icon: 'library_books',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            
             
            ]
          },
          {
              name: 'Lección 9: Grupo 4 (Db, Gb, B)',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  }
                ]
              }
            ]
          }

        ]
      },

//Pieza Final
    

 {
          block: "Pieza Final",
          lessons: [
            {
              name: 'Elección de Pieza Final',
              material:[{
                id: 200,
                title: 'Definición',
                icon: 'music_note',
                activity:[{
                  icon: 'smart_display',
                  type: 'Lección',
                  media: 'video',
                  url: 'https://www.youtube.com/embed/'
                  },{
                  icon: 'auto_stories',
                  type: 'Teoría',
                  media: 'pdf',
                  url: 'https://drive.google.com/file/d//preview'
                  }
                ]
                },
              ]
          }
        ]

  }



]
     
}])




</script>

<script>


document.addEventListener("DOMContentLoaded", function () {
    var isMobile = /Android|webOS|iPhone|iPad|IEMobile|Opera Mini/i.test(navigator.userAgent);
    var fullscreenBtn = document.getElementById('fullscreen-btn');
    var fullscreenIcon = document.getElementById("fullscreen-icon");

    if (isMobile) {
        // Ocultar botón en móviles
        if (fullscreenBtn) fullscreenBtn.style.display = 'none';
    } else {
        // Mostrar botón en escritorio
        if (fullscreenBtn) fullscreenBtn.style.display = 'flex';

        if (fullscreenBtn) {
            fullscreenBtn.addEventListener("click", function () {
                if (!document.fullscreenElement) {
                    // Entrar a pantalla completa
                    if (document.documentElement.requestFullscreen) {
                        document.documentElement.requestFullscreen();
                    }
                    if (fullscreenIcon) fullscreenIcon.className = "ri-fullscreen-exit-fill";
                } else {
                    // Salir de pantalla completa
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                    if (fullscreenIcon) fullscreenIcon.className = "ri-fullscreen-fill";
                }
            });
        }
    }
});




function showModal(element) {
     var url = element.getAttribute('data-pdf-id');
          $("#drive").attr('src', url);        
        document.getElementById('modalPDF').classList.add('four');
   
}
 
      function closemodal() {
        event.preventDefault();
       const modal = document.getElementById('modalPDF');
        modal.classList.add('out');
        setTimeout(() => {
            modal.classList.remove('four', 'out');
        }, 300);
         if (!/Android|webOS|iPhone|iPad|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
   if (document.fullscreenElement) {
    document.exitFullscreen()
    }
  }
      }


 function close_video_modal() {
        
        event.preventDefault();
        $("body").removeClass("show-video-modal noscroll");
        $("#youtube").attr('src', '');
        
      }
      $('body').on('click', '.close-video-modal', function(event) {
          close_video_modal();
      });




function showQuiz(element){
  var thislvl = element.getAttribute('this-lvl');
  var title= element.getAttribute('quiz-title');
     var subtitle = element.getAttribute('quiz-subtitle');  
  var icon = element.getAttribute('quiz-icon');  
  var datapackage = element.getAttribute('data-package'); 
  startQuiz(thislvl, title, subtitle, datapackage, icon)
  document.getElementById('questionaire').classList.add('four');  
}

      function closeQuiz() {
       const modal = document.getElementById('questionaire');
        modal.classList.add('out');
        setTimeout(() => {
            modal.classList.remove('four', 'out');
        }, 300); 
      }




function startQuiz(lvl, title, subtitle, datapackage, icon) {
  "use strict";
  let questions = [];
  
  if(datapackage == 1){
   questions = [
       {
      question: "¿Nombre de la herramienta musical que gradua el tiempo?",
      img: "",
      answers: ["Reloj", "Cronómetro", "Metronemo", "Metrónomo"],
      correctAnswer: 4
    },
    {
      question: "¿Cómo se le llama a este parámetro musical?",
      img: "https://lh3.googleusercontent.com/d/1DI-QO9klmH-QUpKAN1Re-Wj8Y4RQ6oKs",
      answers: ["Ritmo", "Métrica", "Tempo", "Metro"],
      correctAnswer: 2
    }, {
      question: "¿Cuantos clicks de metronomo dura esta nota?",
      img: "https://lh3.googleusercontent.com/d/1C12iR5SYfg-2gwPO1jjarmkRO4BwPOnB",
      answers: ["2", "3", "1", "4"],
      correctAnswer: 2
    },
    {
      question: "¿Cuantas teclas tiene un piano?",
      img: "",
      answers: ["85", "80", "88", "78"],
      correctAnswer: 3
    },
        {
      question: "¿Cuál debe ser la métrica?",
      img: "https://lh3.googleusercontent.com/d/12ZXAwhvjV1t5rnODPdV_5l-9RNR9aOZp",
      answers: ["2/4", "3/4", "4/4", "1/2"],
      correctAnswer: 3
    },
    {
      question: "¿Cómo se mide la velocidad de un metrónomo?",
       img: "",
      answers: ["En BPM", "En segundos", "Con clicks", "En BBM"],
      correctAnswer: 1
    },  {
      question: "¿Cual es la traducción de measure al español?",
      img: "https://lh3.googleusercontent.com/d/16pxirb4CtxRLx3PSNMNpgvEBdtBbAq9f",
      answers: ["Medida", "Compás", "Medir", "Sección"],
      correctAnswer: 2
    },  {
      question: "¿Que indice tiene la nota C central?",
      img: "https://lh3.googleusercontent.com/d/1C12iR5SYfg-2gwPO1jjarmkRO4BwPOnB",
      answers: ["C4", "C5", "C3", "C1"],
      correctAnswer: 1
    }
  ];
 }
  var questionNumber = document.getElementById('questionTotal');
questionNumber.innerText = questions.length + " preguntas"
  
    var quizBG = document.getElementById('quiz-bg');
  
  var closeButton = document.querySelector('.buttons-container .blue-btn:first-child');
var startButton = document.getElementById('start-quiz-btn');
  
  if (lvl == 0) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #c52c20, #ff7961)';
  quizBG.style.background = '-o-linear-gradient(45deg, #c52c20, #ff7961)';
  quizBG.style.background = 'linear-gradient(45deg, #c52c20, #ff7961)';
    closeButton.style.backgroundColor = '#c52c20';  
  startButton.style.backgroundColor = '#c52c20';
} else if (lvl == 1) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #9024dc, #b57ff5)';
  quizBG.style.background = '-o-linear-gradient(45deg, #9024dc, #b57ff5)';
  quizBG.style.background = 'linear-gradient(45deg, #9024dc, #b57ff5)';
   closeButton.style.backgroundColor = '#9024dc';  
  startButton.style.backgroundColor = '#9024dc';
} else if (lvl == 2) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #1894cc, #63c9ff)';
  quizBG.style.background = '-o-linear-gradient(45deg, #1894cc, #63c9ff)';
  quizBG.style.background = 'linear-gradient(45deg, #1894cc, #63c9ff)';
   closeButton.style.backgroundColor = '#1894cc';  
  startButton.style.backgroundColor = '#1894cc';
} else if (lvl == 3) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #489454, #7fd583)';
  quizBG.style.background = '-o-linear-gradient(45deg, #489454, #7fd583)';
  quizBG.style.background = 'linear-gradient(45deg, #489454, #7fd583)';
   closeButton.style.backgroundColor = '#489454';  
  startButton.style.backgroundColor = '#489454';
} else if (lvl == 4) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #f0ac14, #f7d253)';
  quizBG.style.background = '-o-linear-gradient(45deg, #f0ac14, #f7d253)';
  quizBG.style.background = 'linear-gradient(45deg, #f0ac14, #f7d253)';
   closeButton.style.backgroundColor = '#f0ac14';  
  startButton.style.backgroundColor = '#f0ac14';
} else if (lvl == 5) {
  quizBG.style.background = '-webkit-linear-gradient(45deg, #485cb4, #8091e8)';
  quizBG.style.background = '-o-linear-gradient(45deg, #485cb4, #8091e8)';
  quizBG.style.background = 'linear-gradient(45deg, #485cb4, #8091e8)';
   closeButton.style.backgroundColor = '#485cb4';  
  startButton.style.backgroundColor = '#485cb4';
}
  
  let questionIndex, currentQuestion, score, timeSpent, quizTimer, questionIsAnswered;
  
  // Configurar la introducción del quiz
  const quizIco = document.getElementById('quizIco');
  quizIco.innerText = icon;
  
  const quizBody = document.getElementById('quiz-body');
  quizBody.getElementsByTagName('h4')[0].innerText = title;
  quizBody.getElementsByTagName('h1')[0].innerText = subtitle;
  
  let quizIntro = document.querySelector(".quiz-intro");
  let quizContent = document.getElementById("quiz-content");
  let resultsSection = document.getElementById("results");

  // Función para inicializar el quiz
  function initQuiz() {
     resultsSection.style.display = "none";
    quizIntro.style.display = "none"; // Esconde la introducción
    quizContent.style.display = "block"; // Muestra el contenido del quiz
    
    questionIndex = 0;
    currentQuestion = 1;
    questionIsAnswered = 0;
    score = 0;
    timeSpent = "00:00";
    
    let progres = document.getElementById("progress");
    progres.style.width = 0 + "%";

    // Actualizar estadísticas iniciales
    document.getElementById("questionNumber").textContent = `${currentQuestion}/${questions.length}`;
    document.getElementById("score").textContent = score;
    document.getElementById("timer").textContent = timeSpent;

    displayQuestion();
    startTimer();
  }

  // Función para mostrar la pregunta actual
  function displayQuestion() {
    let question = questions[questionIndex];
    let answers = document.getElementById("answers");
    let output = `<div id="question-container"><h2 class="text-center bold">${currentQuestion}. ${question.question}</h2>`;
    
    // Añadir imagen si está disponible
    if (question.img) {
      output += `<div class="imgQuizContainer"><img src="${question.img}" class="imageQuiz" /></div>`;
    }
    
    // Generar las respuestas
    output += `</div><div id="answers-container">`;

// Generar las respuestas
question.answers.forEach((answer, index) => {
  output += `
    <div class="answer">
      <input type="radio" id="answer-${index + 1}" name="answers" value="${index + 1}">
      <label for="answer-${index + 1}">
        <span class="answer-number">${index + 1}.</span> ${answer}
      </label>
    </div>`;
});

// Cerrar el contenedor de respuestas
output += `</div>`;

    answers.innerHTML = output; // Actualiza el contenedor de respuestas
  }

  // Función para iniciar el temporizador
  function startTimer() {
    let s = 0, m = 0, h = 0;
    let timer = document.getElementById("timer");

    quizTimer = setInterval(() => {
      s++;
      if (s > 59) { s = 0; m++; }
      if (m > 59) { m = 0; h++; }

      let seconds = s < 10 ? "0" + s : s;
      let minutes = m < 10 ? "0" + m : m;
      let hours = h < 10 ? "0" + h : h;

      timeSpent = h ? `${hours}:${minutes}:${seconds}` : `${minutes}:${seconds}`;
      timer.textContent = timeSpent;
    }, 1000);
  }

  // Función para mostrar los resultados
  function displayResults() {
    let notification = document.getElementById("notification");
    notification.parentElement.removeChild(notification);
    quizContent.style.display = "none"; // Esconde el contenido del quiz
    resultsSection.style.display = "block"; // Muestra los resultados
    
    document.getElementById("percentage").textContent = `${scorePercentage()}%`;
    document.getElementById("correctAnswers").textContent = score;
    document.getElementById("totalQuestions").textContent = questions.length;
    document.getElementById("finalTime").textContent = timeSpent;
  }
  
   function goToNextQuestion() {
    currentQuestion++;
    questionIndex++;
    questionIsAnswered = 0;

    let notification = document.getElementById("notification");
    notification.parentElement.removeChild(notification);

    let questionNumber = document.getElementById("questionNumber");
    questionNumber.textContent = `${currentQuestion}/${questions.length}`;


    let container1 = document.getElementById("question-container");
    let container2 = document.getElementById("blurWrapper");
    container1.style.filter = "none";
    container2.style.filter = "none";

    displayQuestion();
  }
  
  
  function submitAnswer(e) {
    let selectedAnswer = Number(e.target.value);
    let rightAnswer = questions[questionIndex].correctAnswer;
    let answers = document.getElementsByName("answers");
    let progress = document.getElementById("progress");
    let container1 = document.getElementById("question-container");
    let container2 = document.getElementById("blurWrapper");


    questionIsAnswered = 1;

    progress.style.width = progressPercentage() + "%";

    let notification = document.createElement("div");
    let message = document.createElement("p");
    let label = e.target.nextElementSibling;
    notification.id = "notification";

    if (selectedAnswer === rightAnswer) {
      score++;
      message.textContent = "Respuesta correcta!";
        message.style.color = "#8bc34a";
      label.classList.add("green-bg");
    } else {
      message.textContent = "Respuesta incorrecta";
      message.style.color = "#f44336";
      label.classList.add("red-bg");

      answers.forEach(answer => {
        if (Number(answer.value) !== rightAnswer) return;

        answer.nextElementSibling.classList.add("green-bg");
      });
    }

    let button = document.createElement("button");
    button.classList.add("next-btn")
    button.style.backgroundColor = "#E6EAEF";
   container1.style.filter = "blur(5px) brightness(0.3)";
    container2.style.filter = "blur(5px)";

   

    if (isLastQuestion()) {
      button.id = "show-results-btn";
      button.textContent = "Mostrar resultados";
      clearInterval(quizTimer);
      quizTimer = null;
    } else {
      button.id = "next-btn";
      button.textContent = "Continuar";
    }

    notification.appendChild(message);
    notification.appendChild(button);
    quizContent.insertAdjacentElement("afterend", notification);

    button.focus();

    answers.forEach(answer => (answer.disabled = "disabled"));

    document.getElementById("score").textContent = score;
  }
  
  let scorePercentage = () => (score / questions.length * 100).toFixed(0);
  let progressPercentage = () =>
    (currentQuestion / questions.length * 100).toFixed(0);
  let isLastQuestion = () => currentQuestion === questions.length;



  // Eventos de botones
  document.addEventListener("click", function(e) {
    if (e.target.matches("#start-quiz-btn") || e.target.matches("#start-over-btn")) initQuiz();
    if (e.target.matches("#next-btn")) goToNextQuestion();
    if (e.target.matches("#show-results-btn")) displayResults();
    if (e.target.matches("#close-results-btn")) destroyQuiz();
  });

 document.addEventListener("change", function(e) {
   // if (e.target.matches('input[type="radio"]')) submitAnswer(e);
    if (e.target.matches("[name='answers']")) submitAnswer(e);
  });

  // Resto de las funciones como `submitAnswer`, `goToNextQuestion`, etc.
}

function destroyQuiz() {
  // Ocultra el quiz y resetea el estado si es necesario
  document.querySelector(".quiz-intro").style.display = "block";
  document.getElementById("quiz-content").style.display = "none";
  document.getElementById("results").style.display = "none";

}




 /*
  
function playVideo(index) {
    const video = document.getElementById(`videoPlayer${index}`);
  const audio = document.getElementById(`metronomeAudio${index}`);

    if (video) {
        video.play();
      audio.pause();
    }
}





let metronomeSpeedIndex = {};

function playMetronome(index) {
    const audio = document.getElementById(`metronomeAudio${index}`);
    
    if (!audio) return;

    if (!metronomeSpeedIndex[index]) {
        metronomeSpeedIndex[index] = 0;
    }

    const speeds = [0.85, 1.2, 0]; // La cuarta opción es detener

    if (metronomeSpeedIndex[index] === 2) {
        // Si es la cuarta vez, detener el audio y reiniciar el ciclo
        audio.pause();
        audio.currentTime = 0;
        metronomeSpeedIndex[index] = 0;
    } else {
        // Ajustar la velocidad y reproducir
        audio.playbackRate = speeds[metronomeSpeedIndex[index]];
        audio.play();
        metronomeSpeedIndex[index]++;
    }
}
 
  


const video = document.querySelector("video");
const progress = document.querySelector(".progress__bar");
const keyframes = [...document.querySelectorAll(".keyframe")];
const keyframesPauses = [];

keyframes.forEach(k => {
  keyframesPauses.push(parseFloat(k.dataset.progress));
});

let videoDuration = 15.023311;
let currentProgress = 0;

const progressAnimation = gsap.to(progress, {
  width: "100%",
  ease: "linear",
  paused: true,
  onUpdate: () => {
    const progress = Math.ceil(progressAnimation.progress() * 100);
    if (progress != currentProgress) {
      currentProgress = progress;
      const foundKeyframe = keyframesPauses.find(
      kp => Math.ceil(kp) === currentProgress);

      if (foundKeyframe) {
        const fractionProgress = foundKeyframe / 100;
        video.pause();
        video.currentTime = fractionProgress * videoDuration;
        progressAnimation.progress(fractionProgress);
      }
    }
  } });


const progressUpdate = () => {
  progressAnimation.progress(video.currentTime / video.duration);
};

video.onplay = () => {
  gsap.ticker.add(progressUpdate);
};
video.onpause = () => {
  gsap.ticker.remove(progressUpdate);
  ignoreProgress = true;
};
*/



 
</script> 
